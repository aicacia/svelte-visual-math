function e(){}function t(e,t){for(const r in t)e[r]=t[r];return e}function r(e){return e()}function n(){return Object.create(null)}function i(e){e.forEach(r)}function o(e){return"function"==typeof e}function s(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function a(t,r,n){t.$$.on_destroy.push(function(t,...r){if(null==t)return e;const n=t.subscribe(...r);return n.unsubscribe?()=>n.unsubscribe():n}(r,n))}function u(e,t,r,n){if(e){const i=c(e,t,r,n);return e[0](i)}}function c(e,r,n,i){return e[1]&&i?t(n.ctx.slice(),e[1](i(r))):n.ctx}function h(e,t,r,n){if(e[2]&&n){const i=e[2](n(r));if(void 0===t.dirty)return i;if("object"==typeof i){const e=[],r=Math.max(t.dirty.length,i.length);for(let n=0;n<r;n+=1)e[n]=t.dirty[n]|i[n];return e}return t.dirty|i}return t.dirty}function l(e,t,r,n,i,o){if(i){const s=c(t,r,n,o);e.p(s,i)}}function f(e){if(e.ctx.length>32){const t=[],r=e.ctx.length/32;for(let e=0;e<r;e++)t[e]=-1;return t}return-1}function d(e,t){e.appendChild(t)}function p(e,t,r){e.insertBefore(t,r||null)}function m(e){e.parentNode.removeChild(e)}function v(e,t){for(let r=0;r<e.length;r+=1)e[r]&&e[r].d(t)}function g(e){return document.createElement(e)}function b(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function y(e){return document.createTextNode(e)}function _(){return y(" ")}function O(){return y("")}function w(e,t,r,n){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r,n)}function k(e,t,r){null==r?e.removeAttribute(t):e.getAttribute(t)!==r&&e.setAttribute(t,r)}function x(e,t){for(const r in t)k(e,r,t[r])}function P(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}let j,S;function E(e,t){"static"===getComputedStyle(e).position&&(e.style.position="relative");const r=g("iframe");r.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),r.setAttribute("aria-hidden","true"),r.tabIndex=-1;const n=function(){if(void 0===j){j=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(e){j=!0}}return j}();let i;return n?(r.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",i=w(window,"message",(e=>{e.source===r.contentWindow&&t()}))):(r.src="about:blank",r.onload=()=>{i=w(r.contentWindow,"resize",t)}),d(e,r),()=>{(n||i&&r.contentWindow)&&i(),m(r)}}function M(e,t,r){e.classList[r?"add":"remove"](t)}function I(e){S=e}function T(){if(!S)throw new Error("Function called outside component initialization");return S}function F(e){T().$$.on_mount.push(e)}function $(e,t){T().$$.context.set(e,t)}function A(e){return T().$$.context.get(e)}const D=[],R=[],H=[],C=[],J=Promise.resolve();let N=!1;function K(e){H.push(e)}function L(e){C.push(e)}let B=!1;const U=new Set;function W(){if(!B){B=!0;do{for(let e=0;e<D.length;e+=1){const t=D[e];I(t),z(t.$$)}for(I(null),D.length=0;R.length;)R.pop()();for(let e=0;e<H.length;e+=1){const t=H[e];U.has(t)||(U.add(t),t())}H.length=0}while(D.length);for(;C.length;)C.pop()();N=!1,B=!1,U.clear()}}function z(e){if(null!==e.fragment){e.update(),i(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(K)}}const V=new Set;let q;function X(){q={r:0,c:[],p:q}}function Y(){q.r||i(q.c),q=q.p}function G(e,t){e&&e.i&&(V.delete(e),e.i(t))}function Q(e,t,r,n){if(e&&e.o){if(V.has(e))return;V.add(e),q.c.push((()=>{V.delete(e),n&&(r&&e.d(1),n())})),e.o(t)}}function Z(e,t){const r={},n={},i={$$scope:1};let o=e.length;for(;o--;){const s=e[o],a=t[o];if(a){for(const e in s)e in a||(n[e]=1);for(const e in a)i[e]||(r[e]=a[e],i[e]=1);e[o]=a}else for(const e in s)i[e]=1}for(const s in n)s in r||(r[s]=void 0);return r}function ee(e,t,r){const n=e.$$.props[t];void 0!==n&&(e.$$.bound[n]=r,r(e.$$.ctx[n]))}function te(e){e&&e.c()}function re(e,t,n,s){const{fragment:a,on_mount:u,on_destroy:c,after_update:h}=e.$$;a&&a.m(t,n),s||K((()=>{const t=u.map(r).filter(o);c?c.push(...t):i(t),e.$$.on_mount=[]})),h.forEach(K)}function ne(e,t){const r=e.$$;null!==r.fragment&&(i(r.on_destroy),r.fragment&&r.fragment.d(t),r.on_destroy=r.fragment=null,r.ctx=[])}function ie(e,t){-1===e.$$.dirty[0]&&(D.push(e),N||(N=!0,J.then(W)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function oe(t,r,o,s,a,u,c,h=[-1]){const l=S;I(t);const f=t.$$={fragment:null,ctx:null,props:u,update:e,not_equal:a,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:r.context||[]),callbacks:n(),dirty:h,skip_bound:!1,root:r.target||l.$$.root};c&&c(f.root);let d=!1;if(f.ctx=o?o(t,r.props||{},((e,r,...n)=>{const i=n.length?n[0]:r;return f.ctx&&a(f.ctx[e],f.ctx[e]=i)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](i),d&&ie(t,e)),r})):[],f.update(),d=!0,i(f.before_update),f.fragment=!!s&&s(f.ctx),r.target){if(r.hydrate){const e=(p=r.target,Array.from(p.childNodes));f.fragment&&f.fragment.l(e),e.forEach(m)}else f.fragment&&f.fragment.c();r.intro&&G(t.$$.fragment),re(t,r.target,r.anchor,r.customElement),W()}var p;I(l)}class se{$destroy(){ne(this,1),this.$destroy=e}$on(e,t){const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{const e=r.indexOf(t);-1!==e&&r.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}var ae="undefined"!=typeof Float32Array?Float32Array:Array;function ue(){var e=new ae(6);return ae!=Float32Array&&(e[1]=0,e[2]=0,e[4]=0,e[5]=0),e[0]=1,e[3]=1,e}function ce(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],s=t[4],a=t[5],u=r*o-n*i;return u?(u=1/u,e[0]=o*u,e[1]=-n*u,e[2]=-i*u,e[3]=r*u,e[4]=(i*a-o*s)*u,e[5]=(n*s-r*a)*u,e):null}function he(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=-r,e[3]=n,e[4]=0,e[5]=0,e}function le(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function fe(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var de=function(e,t,r){var n=t[0],i=t[1],o=t[2],s=t[3],a=t[4],u=t[5],c=r[0],h=r[1],l=r[2],f=r[3],d=r[4],p=r[5];return e[0]=n*c+o*h,e[1]=i*c+s*h,e[2]=n*l+o*f,e[3]=i*l+s*f,e[4]=n*d+o*p+a,e[5]=i*d+s*p+u,e};function pe(){var e=new ae(2);return ae!=Float32Array&&(e[0]=0,e[1]=0),e}function me(e,t){var r=new ae(2);return r[0]=e,r[1]=t,r}function ve(e,t,r){return e[0]=t,e[1]=r,e}function ge(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function be(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function ye(e,t){var r=t[0],n=t[1],i=r*r+n*n;return i>0&&(i=1/Math.sqrt(i)),e[0]=t[0]*i,e[1]=t[1]*i,e}function _e(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i+r[4],e[1]=r[1]*n+r[3]*i+r[5],e}function Oe(e,t,r,n){var i=t[0]-r[0],o=t[1]-r[1],s=Math.sin(n),a=Math.cos(n);return e[0]=i*a-o*s+r[0],e[1]=i*s+o*a+r[1],e}var we=function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e};pe();var ke={},xe={},Pe={};Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.integerToBytes=void 0,Pe.integerToBytes=function(e,t){return e[0]=(4278190080&t)>>24,e[1]=(16711680&t)>>16,e[2]=(65280&t)>>8,e[3]=255&t,e};var je={},Se={},Ee={};Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.Hasher=void 0;const Me=Pe,Ie=new Uint8Array(1),Te=new Uint8Array(4);Ee.Hasher=class{writeByte(e){return Ie[0]=e,this.write(Ie)}writeInteger(e){return this.write(Me.integerToBytes(Te,e))}};var Fe={};Object.defineProperty(Fe,"__esModule",{value:!0}),Fe.smi=void 0,Fe.smi=function(e){return e>>>1&1073741824|3221225471&e},Object.defineProperty(Se,"__esModule",{value:!0}),Se.FastHasher=void 0;const $e=Ee,Ae=Fe;class De extends $e.Hasher{constructor(){super(...arguments),this.hash=0}finish(){return this.hash}write(e){let t=this.hash;for(let r=0,n=e.length;r<n;r++)t=31*t+e[r];return this.hash=Ae.smi(t),this}}Se.FastHasher=De,Object.defineProperty(je,"__esModule",{value:!0}),je.defaultHasher=void 0;const Re=Se;je.defaultHasher=function(){return new Re.FastHasher};var He={};Object.defineProperty(He,"__esModule",{value:!0}),He.bytesToInteger=void 0,He.bytesToInteger=function(e){return e[3]|e[2]<<8|e[1]<<16|e[0]<<24};var Ce={};Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.hash=Ce.hashOf=void 0;const Je=je,Ne=new Set;function Ke(e,t){return Le(e,t),Ne.clear(),t}function Le(e,t){return null==e||Ne.has(e)||(Ne.add(e),"string"==typeof e?Be(e,t):"number"==typeof e?function(e,t){t.writeInteger(e)}(e,t):"boolean"==typeof e?function(e,t){t.writeInteger(!0===e?1:0)}(e,t):"symbol"==typeof e?function(e,t){Be(e.toString(),t)}(e,t):"function"==typeof e[Symbol.iterator]?function(e,t){for(const r of e)Le(r,t)}(e,t):"number"==typeof e.length?function(e,t){for(let r=0,n=e.length;r<n;r++)Le(e[r],t)}(e,t):function(e,t){for(const r in e)e.hasOwnProperty(r)&&(Be(r,t),Le(e[r],t))}(e,t)),t}function Be(e,t){for(const r of e)t.writeInteger(r.charCodeAt(0))}Ce.hashOf=function(e,t=Je.defaultHasher){return Ke(e,t()).finish()},Ce.hash=Ke,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.smi=e.hash=e.hashOf=e.Hasher=e.FastHasher=e.bytesToInteger=e.defaultHasher=e.integerToBytes=void 0;var t=Pe;Object.defineProperty(e,"integerToBytes",{enumerable:!0,get:function(){return t.integerToBytes}});var r=je;Object.defineProperty(e,"defaultHasher",{enumerable:!0,get:function(){return r.defaultHasher}});var n=He;Object.defineProperty(e,"bytesToInteger",{enumerable:!0,get:function(){return n.bytesToInteger}});var i=Se;Object.defineProperty(e,"FastHasher",{enumerable:!0,get:function(){return i.FastHasher}});var o=Ee;Object.defineProperty(e,"Hasher",{enumerable:!0,get:function(){return o.Hasher}});var s=Ce;Object.defineProperty(e,"hashOf",{enumerable:!0,get:function(){return s.hashOf}}),Object.defineProperty(e,"hash",{enumerable:!0,get:function(){return s.hash}});var a=Fe;Object.defineProperty(e,"smi",{enumerable:!0,get:function(){return a.smi}})}(xe);var Ue={},We={},ze={},Ve={},qe={};Object.defineProperty(qe,"__esModule",{value:!0}),qe.toJS=void 0,qe.toJS=function(e){return null!=e&&"function"==typeof e.toJS?e.toJS():e};var Xe={};Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.toJSON=void 0,Xe.toJSON=function(e){return null!=e&&"function"==typeof e.toJSON?e.toJSON():e},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.none=e.some=e.Option=void 0;const t=qe,r=Xe,n={},i={};class o{constructor(e,t){if(e!==n)throw new TypeError("Options can only be created with the some or none functions");this._value=t}static some(t){return e.some(t)}static none(){return e.none()}static from(t){return null!=t?e.some(t):e.none()}static fromResult(t){return t.isOk()?e.some(t.unwrap()):e.none()}isNone(){return this._value===i}isSome(){return!this.isNone()}expect(e){if(this.isSome())return this._value;throw new Error("function"==typeof e?e():e)}unwrap(){return this.expect("Tried to unwrap value of none Option")}unwrapOr(e){return this.isSome()?this._value:e}unwrapOrElse(e){return this.isSome()?this._value:e()}map(t){return this.isSome()?e.some(t(this._value)):e.none()}mapOr(t,r){return this.isSome()?e.some(t(this._value)):e.some(r)}mapOrElse(t,r){return this.isSome()?e.some(t(this._value)):e.some(r())}flatMap(t){return this.isSome()?t(this._value):e.none()}flatMapOr(e,t){return this.isSome()?e(this._value):t}flatMapOrElse(e,t){return this.isSome()?e(this._value):t()}and(t){return this.isSome()?t:e.none()}andThen(t){return this.isSome()?t(this._value):e.none()}or(e){return this.isNone()?e:this}orElse(e){return this.isNone()?e():this}xor(t){const r=this.isSome(),n=t.isSome();return r&&!n?this:!r&&n?t:e.none()}filter(t){return this.isSome()&&t(this._value)?this:e.none()}getOrInsert(e){return this.isNone()&&(this._value=e),this}getOrInsertWith(e){return this.isNone()&&(this._value=e()),this}take(){if(this.isSome()){const t=this._value;return this._value=i,e.some(t)}return e.none()}from(e){return null!=e?this._value=e:this.clear(),this}replace(e){return this._value=e,this}clear(){return this._value=i,this}fromResult(t){return t.isOk()?e.some(t.unwrap()):e.none()}ifSome(e,t){return this.isSome()?e(this._value):t&&t(),this}ifNone(e,t){return this.isNone()?e():t&&t(this._value),this}fromJSON(e){return o.from(e)}toJSON(){return this.map(r.toJSON).unwrapOr(null)}toJS(){return this.map(t.toJS).unwrapOr(null)}}e.Option=o;e.some=e=>new o(n,e);e.none=()=>new o(n,i)}(Ve),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.none=e.some=e.Option=void 0;var t=Ve;Object.defineProperty(e,"Option",{enumerable:!0,get:function(){return t.Option}}),Object.defineProperty(e,"some",{enumerable:!0,get:function(){return t.some}}),Object.defineProperty(e,"none",{enumerable:!0,get:function(){return t.none}})}(ze),Object.defineProperty(We,"__esModule",{value:!0}),We.iter=We.Iter=void 0;const Ye=ze;class Ge{constructor(e){this._index=0,this._iter=e}[Symbol.iterator](){return this}iter(){return this}next(){return this._iter.next()}nextWithIndex(){const e=this._iter.next();return e.done?e:{value:[e.value,this._index++]}}enumerate(){}peekable(){}forEach(e){}map(e){}merge(e){}concat(e){return this.merge(e)}filter(e){}step(e){}skip(e){}take(e){}toMap(e,t){}count(){return this.reduce(0,(e=>e+1))}consume(){let e=this.next();for(;!e.done;)e=this.next();return this}toArray(){return this.reduce([],((e,t)=>(e.push(t),e)))}join(e){return this.toArray().join(e)}indexOf(e){let t=this.next(),r=0;for(;!t.done;){if(t.value===e)return r;r++,t=this.next()}return-1}findIndex(e){let t=this.nextWithIndex();for(;!t.done;){const[r,n]=t.value;if(e(r,n))return n;t=this.nextWithIndex()}return-1}find(e){let t=this.nextWithIndex();for(;!t.done;){const[r,n]=t.value;if(e(r,n))return Ye.some(r);t=this.nextWithIndex()}return Ye.none()}findAll(e){return this.filter(e)}nth(e=0){let t=this.next();for(e<0&&(e=0);!t.done;){if(e--<=0)return Ye.some(t.value);t=this.next()}return Ye.none()}first(){return this.nth(0)}last(){let e=this.next();for(;!e.done;){const t=this.next();if(t.done)return Ye.some(e.value);e=t}return Ye.none()}any(e){return-1!==this.findIndex(e)}some(e){return this.any(e)}none(e){return-1===this.findIndex(e)}all(e){let t=this.nextWithIndex();for(;!t.done;){const[r,n]=t.value;if(!e(r,n))return!1;t=this.nextWithIndex()}return!0}unflatten(e){}reduce(e,t){let r=this.next();for(;!r.done;){e=t(e,r.value,this._index-1),r=this.next()}return e}reverse(){return Qe(this.toArray().reverse())}}function Qe(e){return null!=e?"function"==typeof e[Symbol.iterator]?new Ge(e[Symbol.iterator]()):"function"==typeof e.next?e instanceof Ge?e:new Ge(e):Qe("object"==typeof e?Object.entries(e):[e]):Qe([])}We.Iter=Ge,We.iter=Qe;var Ze={};Object.defineProperty(Ze,"__esModule",{value:!0}),Ze.Enumerate=void 0;const et=We;class tt extends et.Iter{constructor(e){super(e)}next(){const e=super.nextWithIndex();return e.done?e:{value:rt(e.value)}}}function rt(e){const t=e[0],r=e;return r[0]=e[1],r[1]=t,r}Ze.Enumerate=tt,et.Iter.prototype.enumerate=function(){return new tt(this)};var nt={};Object.defineProperty(nt,"__esModule",{value:!0}),nt.Filter=void 0;const it=We;class ot extends it.Iter{constructor(e,t){super(e),this._fn=t}next(){let e=super.nextWithIndex();for(;!e.done;){const[t,r]=e.value;if(this._fn(t,r))return{done:!1,value:t};e=super.nextWithIndex()}return{done:!0,value:void 0}}}nt.Filter=ot,it.Iter.prototype.filter=function(e){return new ot(this,e)};var st={};Object.defineProperty(st,"__esModule",{value:!0}),st.ForEach=void 0;const at=We;class ut extends at.Iter{constructor(e,t){super(e),this._fn=([e,r])=>(t(e,r),e)}next(){const e=super.nextWithIndex();return e.done?e:{done:!1,value:this._fn(e.value)}}}st.ForEach=ut,at.Iter.prototype.forEach=function(e){return new ut(this,e)};var ct={};Object.defineProperty(ct,"__esModule",{value:!0}),ct.Map=void 0;const ht=We;class lt extends ht.Iter{constructor(e,t){super(e),this._fn=([e,r])=>t(e,r)}next(){const e=super.nextWithIndex();return e.done?e:{done:!1,value:this._fn(e.value)}}}ct.Map=lt,ht.Iter.prototype.map=function(e){return new lt(this,e)};var ft={};Object.defineProperty(ft,"__esModule",{value:!0}),ft.Merge=void 0;const dt=We;class pt extends dt.Iter{constructor(e,t){super(e),this._other=t}next(){const e=super.next();return e.done?this._other.next():e}}ft.Merge=pt,dt.Iter.prototype.merge=function(e){return new pt(this,e)};var mt={};Object.defineProperty(mt,"__esModule",{value:!0}),mt.Peekable=void 0;const vt=ze,gt=We;class bt extends gt.Iter{constructor(){super(...arguments),this.peeked=[]}unpeekAll(){return this.peeked.length=0,this}unpeek(){return this.peeked.length>0?vt.some(this.peeked.shift()):vt.none()}peek(e=0){if(e<this.peeked.length)return vt.some(this.peeked[e]);{let t=this.peeked.length-e-1,r=super.next();for(;!(r.done||(this.peeked.push(r.value),--t<=0));)r=super.next();return r.done?vt.none():vt.some(r.value)}}next(){const e=this.unpeek();if(e.isSome())return{done:!1,value:e.unwrap()};const t=super.next();return t.done?t:{done:!1,value:t.value}}}mt.Peekable=bt,gt.Iter.prototype.peekable=function(){return new bt(this)};var yt={};Object.defineProperty(yt,"__esModule",{value:!0}),yt.Skip=void 0;const _t=We;class Ot extends _t.Iter{constructor(e,t){super(e),this._skipped=0,this._skip=0|(t<=0?0:t)}next(){let e=super.next();for(;!e.done;){if(!(this._skipped<=this._skip))return e;this._skipped+=1,e=super.next()}return{done:!0,value:void 0}}}yt.Skip=Ot,_t.Iter.prototype.skip=function(e){return new Ot(this,e)};var wt={};Object.defineProperty(wt,"__esModule",{value:!0}),wt.Step=void 0;const kt=We;class xt extends kt.Iter{constructor(e,t){super(e),this._stepped=0,this._step=t<=0?1:0|t}next(){let e=super.next();for(;!e.done;){if(!(this._stepped<this._step))return this._stepped=0,e;this._stepped+=1,e=super.next()}return{done:!0,value:void 0}}}wt.Step=xt,kt.Iter.prototype.step=function(e){return new xt(this,e)};var Pt={};Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.Take=void 0;const jt=We;class St extends jt.Iter{constructor(e,t){super(e),this._taken=0,this._count=0|(t<=0?0:t)}next(){return this._taken<this._count?(this._taken+=1,super.next()):{done:!0,value:void 0}}}Pt.Take=St,jt.Iter.prototype.take=function(e){return new St(this,e)};var Et={};Object.defineProperty(Et,"__esModule",{value:!0}),Et.ToMap=void 0;const Mt=We,It=e=>e,Tt=e=>e;class Ft extends Mt.Iter{constructor(e,t=It,r=Tt){super(e),this._map=([e,n])=>[t(e,n),r(e,n)]}toObject(){return this.reduce({},((e,t)=>(e[t[0]]=t[1],e)))}next(){const e=super.nextWithIndex();return e.done?e:{done:!1,value:this._map(e.value)}}}Et.ToMap=Ft,Mt.Iter.prototype.toMap=function(e,t){return new Ft(this,e,t)};var $t={};Object.defineProperty($t,"__esModule",{value:!0}),$t.Unflatten=void 0;const At=We;class Dt extends At.Iter{constructor(e,t){super(e),this._fn=t}next(){return this._fn(this._iter)}}$t.Unflatten=Dt,At.Iter.prototype.unflatten=function(e){return new Dt(this,e)},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Unflatten=e.ToMap=e.Take=e.Step=e.Skip=e.Peekable=e.Merge=e.Map=e.ForEach=e.Filter=e.Enumerate=e.iter=e.Iter=void 0;var t=We;Object.defineProperty(e,"Iter",{enumerable:!0,get:function(){return t.Iter}}),Object.defineProperty(e,"iter",{enumerable:!0,get:function(){return t.iter}});var r=Ze;Object.defineProperty(e,"Enumerate",{enumerable:!0,get:function(){return r.Enumerate}});var n=nt;Object.defineProperty(e,"Filter",{enumerable:!0,get:function(){return n.Filter}});var i=st;Object.defineProperty(e,"ForEach",{enumerable:!0,get:function(){return i.ForEach}});var o=ct;Object.defineProperty(e,"Map",{enumerable:!0,get:function(){return o.Map}});var s=ft;Object.defineProperty(e,"Merge",{enumerable:!0,get:function(){return s.Merge}});var a=mt;Object.defineProperty(e,"Peekable",{enumerable:!0,get:function(){return a.Peekable}});var u=yt;Object.defineProperty(e,"Skip",{enumerable:!0,get:function(){return u.Skip}});var c=wt;Object.defineProperty(e,"Step",{enumerable:!0,get:function(){return c.Step}});var h=Pt;Object.defineProperty(e,"Take",{enumerable:!0,get:function(){return h.Take}});var l=Et;Object.defineProperty(e,"ToMap",{enumerable:!0,get:function(){return l.ToMap}});var f=$t;Object.defineProperty(e,"Unflatten",{enumerable:!0,get:function(){return f.Unflatten}})}(Ue);var Rt={},Ht={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.range=e.Range=e.RangeDirection=void 0;const t=Ue;var r,n;(n=r=e.RangeDirection||(e.RangeDirection={}))[n.Forward=0]="Forward",n[n.Backward=1]="Backward";class i{constructor(e,t,n=1){this.start=e,this.end=t,this.step=Math.abs(n),this.direction=e>t?r.Backward:r.Forward}static from(e,t,r=1){return new i(e,t,r)}getStart(){return this.start}getEnd(){return this.end}getStep(){return this.step}getDirection(){return this.direction}contains(e){return this.start<=e&&e<=this.end}isEmpty(){return this.direction===r.Forward?this.start>this.end:this.start<this.end}iter(){return new t.Iter(this)}[Symbol.iterator](){return this}next(){if(this.isEmpty())return{done:!0,value:void 0};{const e=this.start;return this.direction===r.Forward?this.start+=this.step:this.start-=this.step,{done:!1,value:e}}}}e.Range=i,e.range=i.from}(Ht);var Ct={};Object.defineProperty(Ct,"__esModule",{value:!0}),Ct.rangeFrom=Ct.RangeFrom=void 0;const Jt=Ht;class Nt extends Jt.Range{static from(e,t=Jt.RangeDirection.Forward,r=1){return new Nt(e,t,r)}constructor(e,t=Jt.RangeDirection.Forward,r=1){t===Jt.RangeDirection.Forward?super(e,1/0,r):super(e,-1/0,r)}}Ct.RangeFrom=Nt,Ct.rangeFrom=Nt.from,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RangeFrom=e.rangeFrom=e.RangeDirection=e.range=e.Range=void 0;var t=Ht;Object.defineProperty(e,"Range",{enumerable:!0,get:function(){return t.Range}}),Object.defineProperty(e,"range",{enumerable:!0,get:function(){return t.range}}),Object.defineProperty(e,"RangeDirection",{enumerable:!0,get:function(){return t.RangeDirection}});var r=Ct;Object.defineProperty(e,"rangeFrom",{enumerable:!0,get:function(){return r.rangeFrom}}),Object.defineProperty(e,"RangeFrom",{enumerable:!0,get:function(){return r.RangeFrom}})}(Rt);var Kt={},Lt={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.err=e.ok=e.Result=void 0;const t=qe,r=Xe,n={},i={};class o{constructor(e,t,r){if(e!==n)throw new TypeError("Results can only be created with the ok or err functions");this._ok=t,this._err=r}static ok(t){return e.ok(t)}static err(t){return e.err(t)}static fromOption(t,r="Tried to create Result from none Option"){return t.isSome()?e.ok(t.unwrap()):e.err(new Error(r))}isErr(){return this._err!==i}isOk(){return this._ok!==i}expect(){if(this.isOk())return this._ok;throw this._err}unwrap(){return this.expect()}unwrapOr(e){return this.isOk()?this._ok:e}unwrapOrElse(e){return this.isOk()?this._ok:e(this._err)}map(t){return this.isOk()?e.ok(t(this._ok)):e.err(this._err)}mapOr(t,r){return this.isOk()?e.ok(t(this._ok)):e.ok(r)}mapOrElse(t,r){return this.isOk()?e.ok(t(this._ok)):e.ok(r(this._err))}flatMap(t){return this.isOk()?t(this._ok):e.err(this._err)}flatMapOr(e,t){return this.isOk()?e(this._ok):t}flatMapOrElse(e,t){return this.isOk()?e(this._ok):t(this._err)}expectErr(e){if(this.isErr())return this._err;throw new Error("function"==typeof e?e():e)}unwrapErr(){return this.expectErr("Tried to unwrap error value of ok Result")}unwrapErrOr(e){return this.isErr()?this._err:e}unwrapErrOrElse(e){return this.isErr()?this._err:e(this._ok)}mapErr(t){return this.isErr()?e.err(t(this._err)):e.ok(this._ok)}mapErrOr(t,r){return this.isErr()?e.err(t(this._err)):e.err(r)}mapErrOrElse(t,r){return this.isErr()?e.err(t(this._err)):e.err(r(this._ok))}flatMapErr(t){return this.isErr()?t(this._err):e.ok(this._ok)}flatMapErrOr(e,t){return this.isErr()?e(this._err):t}flatMapErrOrElse(e,t){return this.isErr()?e(this._err):t(this._ok)}and(t){return this.isOk()?t:e.err(this._err)}andThen(t){return this.isOk()?t(this._ok):e.err(this._err)}or(e){return this.isErr()?e:this}orElse(e){return this.isErr()?e(this._err):this}ifOk(e,t){return this.isOk()?e(this._ok):t&&t(this._err),this}ifErr(e,t){return this.isErr()?e(this._err):t&&t(this._ok),this}fromJSON(t){if(t){if(t.ok)return e.ok(t.ok);if(t.err)return e.err(t.err)}throw new TypeError("Invalid json for Result")}toJSON(){return this.isOk()?{ok:this.map(r.toJSON).unwrap()}:{err:this.mapErr(r.toJSON).unwrapErr()}}toJS(){return this.isOk()?{ok:this.map(t.toJS).unwrap()}:{err:this.mapErr(t.toJS).unwrapErr()}}}e.Result=o;e.ok=e=>new o(n,e,i);e.err=e=>new o(n,i,e)}(Lt),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.err=e.ok=e.Result=void 0;var t=Lt;Object.defineProperty(e,"Result",{enumerable:!0,get:function(){return t.Result}}),Object.defineProperty(e,"ok",{enumerable:!0,get:function(){return t.ok}}),Object.defineProperty(e,"err",{enumerable:!0,get:function(){return t.err}})}(Kt),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.toJSON=e.toJS=e.Result=e.err=e.ok=e.RangeDirection=e.RangeFrom=e.Range=e.rangeFrom=e.range=e.Option=e.none=e.some=e.Unflatten=e.ToMap=e.Take=e.Step=e.Skip=e.Peekable=e.Merge=e.Map=e.Iter=e.iter=e.ForEach=e.Filter=e.Enumerate=e.hashOf=e.hash=e.defaultHasher=e.FastHasher=e.Hasher=e.bytesToInteger=e.integerToBytes=void 0;var t=xe;Object.defineProperty(e,"integerToBytes",{enumerable:!0,get:function(){return t.integerToBytes}}),Object.defineProperty(e,"bytesToInteger",{enumerable:!0,get:function(){return t.bytesToInteger}}),Object.defineProperty(e,"Hasher",{enumerable:!0,get:function(){return t.Hasher}}),Object.defineProperty(e,"FastHasher",{enumerable:!0,get:function(){return t.FastHasher}}),Object.defineProperty(e,"defaultHasher",{enumerable:!0,get:function(){return t.defaultHasher}}),Object.defineProperty(e,"hash",{enumerable:!0,get:function(){return t.hash}}),Object.defineProperty(e,"hashOf",{enumerable:!0,get:function(){return t.hashOf}});var r=Ue;Object.defineProperty(e,"Enumerate",{enumerable:!0,get:function(){return r.Enumerate}}),Object.defineProperty(e,"Filter",{enumerable:!0,get:function(){return r.Filter}}),Object.defineProperty(e,"ForEach",{enumerable:!0,get:function(){return r.ForEach}}),Object.defineProperty(e,"iter",{enumerable:!0,get:function(){return r.iter}}),Object.defineProperty(e,"Iter",{enumerable:!0,get:function(){return r.Iter}}),Object.defineProperty(e,"Map",{enumerable:!0,get:function(){return r.Map}}),Object.defineProperty(e,"Merge",{enumerable:!0,get:function(){return r.Merge}}),Object.defineProperty(e,"Peekable",{enumerable:!0,get:function(){return r.Peekable}}),Object.defineProperty(e,"Skip",{enumerable:!0,get:function(){return r.Skip}}),Object.defineProperty(e,"Step",{enumerable:!0,get:function(){return r.Step}}),Object.defineProperty(e,"Take",{enumerable:!0,get:function(){return r.Take}}),Object.defineProperty(e,"ToMap",{enumerable:!0,get:function(){return r.ToMap}}),Object.defineProperty(e,"Unflatten",{enumerable:!0,get:function(){return r.Unflatten}});var n=ze;Object.defineProperty(e,"some",{enumerable:!0,get:function(){return n.some}}),Object.defineProperty(e,"none",{enumerable:!0,get:function(){return n.none}}),Object.defineProperty(e,"Option",{enumerable:!0,get:function(){return n.Option}});var i=Rt;Object.defineProperty(e,"range",{enumerable:!0,get:function(){return i.range}}),Object.defineProperty(e,"rangeFrom",{enumerable:!0,get:function(){return i.rangeFrom}}),Object.defineProperty(e,"Range",{enumerable:!0,get:function(){return i.Range}}),Object.defineProperty(e,"RangeFrom",{enumerable:!0,get:function(){return i.RangeFrom}}),Object.defineProperty(e,"RangeDirection",{enumerable:!0,get:function(){return i.RangeDirection}});var o=Kt;Object.defineProperty(e,"ok",{enumerable:!0,get:function(){return o.ok}}),Object.defineProperty(e,"err",{enumerable:!0,get:function(){return o.err}}),Object.defineProperty(e,"Result",{enumerable:!0,get:function(){return o.Result}});var s=qe;Object.defineProperty(e,"toJS",{enumerable:!0,get:function(){return s.toJS}});var a=Xe;Object.defineProperty(e,"toJSON",{enumerable:!0,get:function(){return a.toJSON}})}(ke);const Bt={toVector:(e,t)=>(void 0===e&&(e=t),Array.isArray(e)?e:[e,e]),add:(e,t)=>[e[0]+t[0],e[1]+t[1]],sub:(e,t)=>[e[0]-t[0],e[1]-t[1]],addTo(e,t){e[0]+=t[0],e[1]+=t[1]},subTo(e,t){e[0]-=t[0],e[1]-=t[1]}};function Ut(e,t,r){return 0===t||Math.abs(t)===1/0?Math.pow(e,5*r):e*t*r/(t+r*e)}function Wt(e,t,r,n=.15){return 0===n?function(e,t,r){return Math.max(t,Math.min(e,r))}(e,t,r):e<t?-Ut(t-e,r-t,n)+t:e>r?+Ut(e-r,r-t,n)+r:e}function zt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vt(Object(r),!0).forEach((function(t){zt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Xt={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function Yt(e){return e?e[0].toUpperCase()+e.slice(1):""}function Gt(e){return"touches"in e}function Qt(e){return Gt(e)?function(e){return"touchend"===e.type?e.changedTouches:e.targetTouches}(e)[0]:e}function Zt(e){return function(e){return Array.from(e.touches).filter((t=>{var r,n;return t.target===e.currentTarget||(null===(r=e.currentTarget)||void 0===r||null===(n=r.contains)||void 0===n?void 0:n.call(r,t.target))}))}(e).map((e=>e.identifier))}function er(e){const t=Qt(e);return Gt(e)?t.identifier:t.pointerId}function tr(e){const t=Qt(e);return[t.clientX,t.clientY]}function rr(e,...t){return"function"==typeof e?e(...t):e}function nr(){}function ir(...e){return 0===e.length?nr:1===e.length?e[0]:function(){let t;for(const r of e)t=r.apply(this,arguments)||t;return t}}function or(e,t){return Object.assign({},t,e||{})}class sr extends class{constructor(e,t,r){this.ctrl=e,this.args=t,this.key=r,this.state||(this.state={values:[0,0],initial:[0,0]},this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,config:r,ingKey:n,args:i}=this,{transform:o,threshold:s=[0,0]}=r;t[n]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._delta=[0,0],e._threshold=Bt.sub(o(s),o([0,0])).map(Math.abs),e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=i,e.axis=void 0,e.memo=void 0,e.elapsedTime=0,e.direction=[0,0],e.distance=[0,0],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,r=this.config;t._active||(this.reset(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.initial=t.values,t.lastOffset=r.from?rr(r.from,t):t.offset,t.offset=t.lastOffset),t.startTime=t.timeStamp=e.timeStamp}compute(e){const{state:t,config:r,shared:n}=this;t.args=this.args;let i=0;if(e&&(t.event=e,t.type=e.type,n.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,n.locked=!!document.pointerLockElement,Object.assign(n,function(e){const t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){const{shiftKey:r,altKey:n,metaKey:i,ctrlKey:o}=e;Object.assign(t,{shiftKey:r,altKey:n,metaKey:i,ctrlKey:o})}return t}(e)),n.down=n.pressed=n.buttons%2==1||n.touches>0,i=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const e=t._delta.map(Math.abs);Bt.addTo(t._distance,e)}const[o,s]=r.transform(t._movement),[a,u]=t._threshold;let[c,h]=t._step;if(!1===c&&(c=Math.abs(o)>=a&&Math.sign(o)*a),!1===h&&(h=Math.abs(s)>=u&&Math.sign(s)*u),t.intentional=!1!==c||!1!==h,!t.intentional)return;t._step=[c,h];const l=[0,0];if(l[0]=!1!==c?o-c:0,l[1]=!1!==h?s-h:0,this.intent&&this.intent(l),(t._active&&!t._blocked||t.active)&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=n[this.ingKey]=t._active,e)){t.first&&("bounds"in r&&(t._bounds=rr(r.bounds,t)),this.setup&&this.setup());const e=t.movement;if(t.movement=l,this.computeOffset(),!t.last){t.delta=Bt.sub(l,e);const r=t.delta.map(Math.abs);Bt.addTo(t.distance,r),t.direction=t.delta.map(Math.sign),!t.first&&i>0&&(t.velocity=[r[0]/i,r[1]/i])}}const f=t._active&&r.rubberband||[0,0];t.offset=function(e,[t,r],[n,i]){const[[o,s],[a,u]]=e;return[Wt(t,o,s,n),Wt(r,a,u,i)]}(t._bounds,t.offset,f),this.computeMovement()}emit(){const e=this.state,t=this.shared,r=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!r.triggerAllEvents)return;const n=this.handler(qt(qt(qt({},t),e),{},{[this.aliasKey]:e.values}));void 0!==n&&(e.memo=n)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}{constructor(...e){super(...e),zt(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Bt.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=Bt.sub(this.state.offset,this.state.lastOffset)}intent(e){this.state.axis=this.state.axis||function([e,t]){const r=Math.abs(e)-Math.abs(t);return r>0?"x":r<0?"y":void 0}(e),this.state._blocked=(this.config.lockDirection||!!this.config.axis)&&!this.state.axis||!!this.config.axis&&this.config.axis!==this.state.axis,this.state._blocked||(this.config.axis||this.config.lockDirection)&&function(e,t){switch(t){case"x":e[1]=0;break;case"y":e[0]=0}}(e,this.state.axis)}}const ar={enabled:(e=!0)=>e,triggerAllEvents:(e=!1)=>e,rubberband(e=0){switch(e){case!0:return[.15,.15];case!1:return[0,0];default:return Bt.toVector(e)}},from:e=>"function"==typeof e?e:null!=e?Bt.toVector(e):void 0,transform:(e,t,r)=>e||r.shared.transform},ur=qt(qt({},ar),{},{axis(e,t,{axis:r}){if(this.lockDirection="lock"===r,!this.lockDirection)return r},bounds(e={}){if("function"==typeof e)return t=>ur.bounds(e(t));if("current"in e)return()=>e.current;if("function"==typeof HTMLElement&&e instanceof HTMLElement)return e;const{left:t=-1/0,right:r=1/0,top:n=-1/0,bottom:i=1/0}=e;return[[t,r],[n,i]]}}),cr={ArrowRight:(e=1)=>[10*e,0],ArrowLeft:(e=1)=>[-10*e,0],ArrowUp:(e=1)=>[0,-10*e],ArrowDown:(e=1)=>[0,10*e]};const hr="undefined"!=typeof window&&window.document&&window.document.createElement;function lr(){return hr&&"ontouchstart"in window}const fr={isBrowser:hr,gesture:function(){try{return"constructor"in GestureEvent}catch(e){return!1}}(),touch:lr(),touchscreen:lr()||hr&&navigator.maxTouchPoints>1,pointer:hr&&"onpointerdown"in window,pointerLock:hr&&"exitPointerLock"in window.document},dr=qt(qt({},ur),{},{pointerLock(e,t,{pointer:{lock:r=!1,touch:n=!1}={}}){return this.useTouch=fr.touch&&n,fr.pointerLock&&r},device(e,t){return this.useTouch?"touch":this.pointerLock?"mouse":fr.pointer?"pointer":fr.touch?"touch":"mouse"},preventScroll(e=!1,t,{preventScrollAxis:r="y"}){return r&&(this.preventScrollAxis=r),!!fr.touchscreen&&("number"==typeof e?e:!!e&&250)},pointerCapture(e,t,{pointer:{capture:r=!0}={}}){return!this.pointerLock&&"pointer"===this.device&&r},threshold(e,t,{filterTaps:r=!1,axis:n}){const i=Bt.toVector(e,r?3:n?1:0);return this.filterTaps=r,i},swipe({velocity:e=.5,distance:t=50,duration:r=250}={}){return{velocity:this.transform(Bt.toVector(e)),distance:this.transform(Bt.toVector(t)),duration:r}},delay(e=0){switch(e){case!0:return 180;case!1:return 0;default:return e}}});qt(qt({},ar),{},{useTouch:(e,t,{pointer:{touch:r=!1}={}})=>fr.touch&&r,device(e,t,r){if(r.shared.target&&!fr.touch&&fr.gesture)return"gesture";if(this.useTouch)return"touch";if(fr.touchscreen){if(fr.pointer)return"pointer";if(fr.touch)return"touch"}},bounds(e,t,{scaleBounds:r={},angleBounds:n={}}){const i=e=>{const t=or(rr(r,e),{min:-1/0,max:1/0});return[t.min,t.max]},o=e=>{const t=or(rr(n,e),{min:-1/0,max:1/0});return[t.min,t.max]};return"function"!=typeof r&&"function"!=typeof n?[i(),o()]:e=>[i(e),o(e)]},threshold(e,t,r){this.lockDirection="lock"===r.axis;return Bt.toVector(e,this.lockDirection?[.1,3]:0)}}),qt(qt({},ur),{},{mouseOnly:(e=!0)=>e});const pr=ur;qt(qt({},ur),{},{mouseOnly:(e=!0)=>e});const mr=new Map,vr=new Map;function gr(e){mr.set(e.key,e.engine),vr.set(e.key,e.resolver)}const br={key:"drag",engine:class extends sr{constructor(...e){super(...e),zt(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),r=e.currentTarget.getBoundingClientRect(),n={left:t.left-r.left+e.offset[0],right:t.right-r.right+e.offset[0],top:t.top-r.top+e.offset[1],bottom:t.bottom-r.bottom+e.offset[1]};e._bounds=ur.bounds(n)}}cancel(){const e=this.state;e.canceled||setTimeout((()=>{e.canceled=!0,e._active=!1,this.compute(),this.emit()}),0)}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){if(null!=e.buttons&&e.buttons%2!=1)return;this.ctrl.setEventIds(e),this.config.pointerCapture&&e.target.setPointerCapture(e.pointerId);const t=this.state,r=this.config;t._pointerActive||(this.start(e),this.setupPointer(e),t._pointerId=er(e),t._pointerActive=!0,t.values=tr(e),t.initial=t.values,r.preventScroll?this.setupScrollPrevention(e):r.delay>0?this.setupDelayTrigger(e):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,r=this.config;if(!t._pointerActive)return;if(t.type===e.type&&e.timeStamp===t.timeStamp)return;const n=er(e);if(t._pointerId&&n!==t._pointerId)return;const i=tr(e);return document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=Bt.sub(i,t.values),t.values=i),Bt.addTo(t._movement,t._delta),this.compute(e),t._delayed?(this.timeoutStore.remove("dragDelay"),void this.startPointerDrag(e)):r.preventScroll&&!t._preventScroll?t.axis?t.axis===r.preventScrollAxis||"xy"===r.preventScrollAxis?(t._active=!1,void this.clean()):(this.timeoutStore.remove("startPointerDrag"),void this.startPointerDrag(e)):void 0:void this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch(s){}const t=this.state,r=this.config;if(!t._pointerActive)return;const n=er(e);if(t._pointerId&&n!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[i,o]=t._distance;if(t.tap=i<=3&&o<=3,t.tap&&r.filterTaps)t._force=!0;else{const[e,n]=t.direction,[i,o]=t.velocity,[s,a]=t.movement,[u,c]=r.swipe.velocity,[h,l]=r.swipe.distance,f=r.swipe.duration;t.elapsedTime<f&&(Math.abs(i)>u&&Math.abs(s)>h&&(t.swipe[0]=e),Math.abs(o)>c&&Math.abs(a)>l&&(t.swipe[1]=n))}this.emit()}pointerClick(e){this.state.tap||(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config;let r=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){!function(e){"persist"in e&&"function"==typeof e.persist&&e.persist()}(e),this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1}),this.eventStore.add(this.sharedConfig.window,"touch","end",this.clean.bind(this),{passive:!1}),this.eventStore.add(this.sharedConfig.window,"touch","cancel",this.clean.bind(this),{passive:!1}),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScroll,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",this.startPointerDrag.bind(this),this.config.delay,e)}keyDown(e){const t=cr[e.key],r=this.state;if(t){const n=e.shiftKey?10:e.altKey?.1:1;r._delta=t(n),this.start(e),r._keyboardActive=!0,Bt.addTo(r._movement,r._delta),this.compute(e),this.emit()}}keyUp(e){e.key in cr&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this))),e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this)),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0})}},resolver:dr},yr={key:"wheel",engine:class extends sr{constructor(...e){super(...e),zt(this,"ingKey","wheeling")}wheel(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(e){const t=this.state;t._delta=function(e){let{deltaX:t,deltaY:r,deltaMode:n}=e;return 1===n?(t*=40,r*=40):2===n&&(t*=800,r*=800),[t,r]}(e),Bt.addTo(this.state._movement,t._delta),this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("wheel","",this.wheel.bind(this))}},resolver:pr};function _r(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}const Or=e=>e,wr={target(e){if(e)return()=>"current"in e?e.current:e},enabled:(e=!0)=>e,window:(e=(fr.isBrowser?window:void 0))=>e,eventOptions:({passive:e=!0,capture:t=!1}={})=>({passive:e,capture:t}),transform:(e=Or)=>e},kr=["target","eventOptions","window","enabled","transform"];function xr(e={},t){const r={};for(const[n,i]of Object.entries(t))switch(typeof i){case"function":r[n]=i.call(r,e[n],n,e);break;case"object":r[n]=xr(e[n],i);break;case"boolean":i&&(r[n]=e[n])}return r}class Pr{constructor(e){zt(this,"_listeners",[]),this._ctrl=e}add(e,t,r,n,i){const o=function(e,t=""){const r=Xt[e];return e+(r&&r[t]||t)}(t,r),s=qt(qt({},this._ctrl.config.shared.eventOptions),i);e.addEventListener(o,n,s),this._listeners.push((()=>e.removeEventListener(o,n,s)))}clean(){this._listeners.forEach((e=>e())),this._listeners=[]}}class jr{constructor(){zt(this,"_timeouts",new Map)}add(e,t,r=140,...n){this.remove(e),this._timeouts.set(e,window.setTimeout(t,r,...n))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach((e=>{window.clearTimeout(e)})),this._timeouts.clear()}}class Sr{constructor(e){zt(this,"gestures",new Set),zt(this,"_targetEventStore",new Pr(this)),zt(this,"gestureEventStores",{}),zt(this,"gestureTimeoutStores",{}),zt(this,"handlers",{}),zt(this,"config",{}),zt(this,"pointerIds",new Set),zt(this,"touchIds",new Set),zt(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),function(e,t){t.drag&&Er(e,"drag");t.wheel&&Er(e,"wheel");t.scroll&&Er(e,"scroll");t.move&&Er(e,"move");t.pinch&&Er(e,"pinch");t.hover&&Er(e,"hover")}(this,e)}setEventIds(e){Gt(e)?this.touchIds=new Set(Zt(e)):"pointerId"in e&&("pointerup"===e.type?this.pointerIds.delete(e.pointerId):this.pointerIds.add(e.pointerId))}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=function(e,t){const r=e,{target:n,eventOptions:i,window:o,enabled:s,transform:a}=r,u=_r(r,kr),c={shared:xr({target:n,eventOptions:i,window:o,enabled:s},wr)};if(t){const e=vr.get(t);c[t]=xr(qt({shared:c.shared},u),e)}else for(const h in u){const e=vr.get(h);e&&(c[h]=xr(qt({shared:c.shared},u[h]),e))}return c}(e,t)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,r=t.eventOptions,n={};let i;if(t.target&&(i=t.target(),!i))return;const o=Mr(n,r,!!i);if(t.enabled){for(const t of this.gestures)if(this.config[t].enabled){new(mr.get(t))(this,e,t).bind(o)}for(const t in this.nativeHandlers)o(t,"",(r=>this.nativeHandlers[t](qt(qt({},this.state.shared),{},{event:r,args:e}))),void 0,!0)}for(const s in n)n[s]=ir(...n[s]);if(!i)return n;for(const s in n){let e=s.substr(2).toLowerCase();const t=!!~e.indexOf("capture"),r=!!~e.indexOf("passive");(t||r)&&(e=e.replace(/capture|passive/g,"")),this._targetEventStore.add(i,e,"",n[s],{capture:t,passive:r})}}}function Er(e,t){e.gestures.add(t),e.gestureEventStores[t]=new Pr(e),e.gestureTimeoutStores[t]=new jr}const Mr=(e,t,r)=>(n,i,o,s={},a=!1)=>{var u,c;const h=null!==(u=s.capture)&&void 0!==u?u:t.capture,l=null!==(c=s.passive)&&void 0!==c?c:t.passive;let f=a?n:function(e,t="",r=!1){const n=Xt[e],i=n&&n[t]||t;return"on"+Yt(e)+Yt(i)+(r?"Capture":"")}(n,i,h);r&&l&&(f+="Passive"),e[f]=e[f]||[],e[f].push(o)};function Ir(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Fr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Tr(Object(r),!0).forEach((function(t){Ir(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const $r=function(e,t,r,n,i){this._gestureKey=n,this._ctrl=new Sr(t),this._ctrl.applyHandlers(t,i),this._ctrl.applyConfig(Fr(Fr({},r),{},{target:e}),this._gestureKey),this._ctrl.effect()};$r.prototype.destroy=function(){this._ctrl.clean()};const Ar=function(e,t,r={}){return gr(br),new $r(e,{drag:t},r,"drag")},Dr=function(e,t,r={}){return gr(yr),new $r(e,{wheel:t},r,"wheel")},Rr=[];function Hr(t,r=e){let n;const i=new Set;function o(e){if(s(t,e)&&(t=e,n)){const e=!Rr.length;for(const r of i)r[1](),Rr.push(r,t);if(e){for(let e=0;e<Rr.length;e+=2)Rr[e][0](Rr[e+1]);Rr.length=0}}}return{set:o,update:function(e){o(e(t))},subscribe:function(s,a=e){const u=[s,a];return i.add(u),1===i.size&&(n=r(o)||e),s(t),()=>{i.delete(u),0===i.size&&(n(),n=null)}}}}export{fe as $,M as A,Z as B,me as C,ve as D,pe as E,ue as F,F as G,Ar as H,ce as I,_e as J,ge as K,R as L,be as M,ye as N,we as O,Oe as P,u as Q,g as R,se as S,K as T,E as U,l as V,f as W,h as X,le as Y,Hr as Z,Dr as _,s as a,he as a0,de as a1,ee as a2,L as a3,b,k as c,p as d,d as e,P as f,A as g,m as h,oe as i,v as j,a as k,ke as l,O as m,e as n,te as o,re as p,G as q,Q as r,$ as s,y as t,ne as u,_ as v,X as w,Y as x,t as y,x as z};
