function e(){}function t(e,t){for(const r in t)e[r]=t[r];return e}function r(e){return e()}function n(){return Object.create(null)}function i(e){e.forEach(r)}function o(e){return"function"==typeof e}function s(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function a(t,r,n){t.$$.on_destroy.push(function(t,...r){if(null==t)return e;const n=t.subscribe(...r);return n.unsubscribe?()=>n.unsubscribe():n}(r,n))}function u(e,t,r,n){if(e){const i=c(e,t,r,n);return e[0](i)}}function c(e,r,n,i){return e[1]&&i?t(n.ctx.slice(),e[1](i(r))):n.ctx}function h(e,t,r,n){if(e[2]&&n){const i=e[2](n(r));if(void 0===t.dirty)return i;if("object"==typeof i){const e=[],r=Math.max(t.dirty.length,i.length);for(let n=0;n<r;n+=1)e[n]=t.dirty[n]|i[n];return e}return t.dirty|i}return t.dirty}function l(e,t,r,n,i,o){if(i){const s=c(t,r,n,o);e.p(s,i)}}function f(e){if(e.ctx.length>32){const t=[],r=e.ctx.length/32;for(let e=0;e<r;e++)t[e]=-1;return t}return-1}function d(e){const t={};for(const r in e)"$"!==r[0]&&(t[r]=e[r]);return t}function p(e,t){const r={};t=new Set(t);for(const n in e)t.has(n)||"$"===n[0]||(r[n]=e[n]);return r}function m(e,t){e.appendChild(t)}function v(e,t,r){e.insertBefore(t,r||null)}function g(e){e.parentNode.removeChild(e)}function b(e,t){for(let r=0;r<e.length;r+=1)e[r]&&e[r].d(t)}function y(e){return document.createElement(e)}function _(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function O(e){return document.createTextNode(e)}function w(){return O(" ")}function k(){return O("")}function x(e,t,r,n){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r,n)}function P(e,t,r){null==r?e.removeAttribute(t):e.getAttribute(t)!==r&&e.setAttribute(t,r)}function j(e,t){for(const r in t)P(e,r,t[r])}function S(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}let E,M;function I(e,t){"static"===getComputedStyle(e).position&&(e.style.position="relative");const r=y("iframe");r.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),r.setAttribute("aria-hidden","true"),r.tabIndex=-1;const n=function(){if(void 0===E){E=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(e){E=!0}}return E}();let i;return n?(r.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",i=x(window,"message",(e=>{e.source===r.contentWindow&&t()}))):(r.src="about:blank",r.onload=()=>{i=x(r.contentWindow,"resize",t)}),m(e,r),()=>{(n||i&&r.contentWindow)&&i(),g(r)}}function T(e,t,r){e.classList[r?"add":"remove"](t)}function $(e){M=e}function F(){if(!M)throw new Error("Function called outside component initialization");return M}function A(e){F().$$.on_mount.push(e)}function D(e,t){F().$$.context.set(e,t)}function R(e){return F().$$.context.get(e)}const H=[],C=[],J=[],N=[],K=Promise.resolve();let L=!1;function B(e){J.push(e)}function U(e){N.push(e)}let W=!1;const z=new Set;function V(){if(!W){W=!0;do{for(let e=0;e<H.length;e+=1){const t=H[e];$(t),q(t.$$)}for($(null),H.length=0;C.length;)C.pop()();for(let e=0;e<J.length;e+=1){const t=J[e];z.has(t)||(z.add(t),t())}J.length=0}while(H.length);for(;N.length;)N.pop()();L=!1,W=!1,z.clear()}}function q(e){if(null!==e.fragment){e.update(),i(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(B)}}const X=new Set;let Y;function G(){Y={r:0,c:[],p:Y}}function Q(){Y.r||i(Y.c),Y=Y.p}function Z(e,t){e&&e.i&&(X.delete(e),e.i(t))}function ee(e,t,r,n){if(e&&e.o){if(X.has(e))return;X.add(e),Y.c.push((()=>{X.delete(e),n&&(r&&e.d(1),n())})),e.o(t)}}function te(e,t){const r={},n={},i={$$scope:1};let o=e.length;for(;o--;){const s=e[o],a=t[o];if(a){for(const e in s)e in a||(n[e]=1);for(const e in a)i[e]||(r[e]=a[e],i[e]=1);e[o]=a}else for(const e in s)i[e]=1}for(const s in n)s in r||(r[s]=void 0);return r}function re(e){return"object"==typeof e&&null!==e?e:{}}function ne(e,t,r){const n=e.$$.props[t];void 0!==n&&(e.$$.bound[n]=r,r(e.$$.ctx[n]))}function ie(e){e&&e.c()}function oe(e,t,n,s){const{fragment:a,on_mount:u,on_destroy:c,after_update:h}=e.$$;a&&a.m(t,n),s||B((()=>{const t=u.map(r).filter(o);c?c.push(...t):i(t),e.$$.on_mount=[]})),h.forEach(B)}function se(e,t){const r=e.$$;null!==r.fragment&&(i(r.on_destroy),r.fragment&&r.fragment.d(t),r.on_destroy=r.fragment=null,r.ctx=[])}function ae(e,t){-1===e.$$.dirty[0]&&(H.push(e),L||(L=!0,K.then(V)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ue(t,r,o,s,a,u,c,h=[-1]){const l=M;$(t);const f=t.$$={fragment:null,ctx:null,props:u,update:e,not_equal:a,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:r.context||[]),callbacks:n(),dirty:h,skip_bound:!1,root:r.target||l.$$.root};c&&c(f.root);let d=!1;if(f.ctx=o?o(t,r.props||{},((e,r,...n)=>{const i=n.length?n[0]:r;return f.ctx&&a(f.ctx[e],f.ctx[e]=i)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](i),d&&ae(t,e)),r})):[],f.update(),d=!0,i(f.before_update),f.fragment=!!s&&s(f.ctx),r.target){if(r.hydrate){const e=(p=r.target,Array.from(p.childNodes));f.fragment&&f.fragment.l(e),e.forEach(g)}else f.fragment&&f.fragment.c();r.intro&&Z(t.$$.fragment),oe(t,r.target,r.anchor,r.customElement),V()}var p;$(l)}class ce{$destroy(){se(this,1),this.$destroy=e}$on(e,t){const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{const e=r.indexOf(t);-1!==e&&r.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}var he="undefined"!=typeof Float32Array?Float32Array:Array;function le(){var e=new he(6);return he!=Float32Array&&(e[1]=0,e[2]=0,e[4]=0,e[5]=0),e[0]=1,e[3]=1,e}function fe(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],s=t[4],a=t[5],u=r*o-n*i;return u?(u=1/u,e[0]=o*u,e[1]=-n*u,e[2]=-i*u,e[3]=r*u,e[4]=(i*a-o*s)*u,e[5]=(n*s-r*a)*u,e):null}function de(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=-r,e[3]=n,e[4]=0,e[5]=0,e}function pe(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function me(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var ve=function(e,t,r){var n=t[0],i=t[1],o=t[2],s=t[3],a=t[4],u=t[5],c=r[0],h=r[1],l=r[2],f=r[3],d=r[4],p=r[5];return e[0]=n*c+o*h,e[1]=i*c+s*h,e[2]=n*l+o*f,e[3]=i*l+s*f,e[4]=n*d+o*p+a,e[5]=i*d+s*p+u,e};function ge(){var e=new he(2);return he!=Float32Array&&(e[0]=0,e[1]=0),e}function be(e,t){var r=new he(2);return r[0]=e,r[1]=t,r}function ye(e,t,r){return e[0]=t,e[1]=r,e}function _e(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function Oe(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function we(e,t){var r=t[0],n=t[1],i=r*r+n*n;return i>0&&(i=1/Math.sqrt(i)),e[0]=t[0]*i,e[1]=t[1]*i,e}function ke(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i+r[4],e[1]=r[1]*n+r[3]*i+r[5],e}function xe(e,t,r,n){var i=t[0]-r[0],o=t[1]-r[1],s=Math.sin(n),a=Math.cos(n);return e[0]=i*a-o*s+r[0],e[1]=i*s+o*a+r[1],e}var Pe=function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e};ge();var je={},Se={},Ee={};Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.integerToBytes=void 0,Ee.integerToBytes=function(e,t){return e[0]=(4278190080&t)>>24,e[1]=(16711680&t)>>16,e[2]=(65280&t)>>8,e[3]=255&t,e};var Me={},Ie={},Te={};Object.defineProperty(Te,"__esModule",{value:!0}),Te.Hasher=void 0;const $e=Ee,Fe=new Uint8Array(1),Ae=new Uint8Array(4);Te.Hasher=class{writeByte(e){return Fe[0]=e,this.write(Fe)}writeInteger(e){return this.write($e.integerToBytes(Ae,e))}};var De={};Object.defineProperty(De,"__esModule",{value:!0}),De.smi=void 0,De.smi=function(e){return e>>>1&1073741824|3221225471&e},Object.defineProperty(Ie,"__esModule",{value:!0}),Ie.FastHasher=void 0;const Re=Te,He=De;class Ce extends Re.Hasher{constructor(){super(...arguments),this.hash=0}finish(){return this.hash}write(e){let t=this.hash;for(let r=0,n=e.length;r<n;r++)t=31*t+e[r];return this.hash=He.smi(t),this}}Ie.FastHasher=Ce,Object.defineProperty(Me,"__esModule",{value:!0}),Me.defaultHasher=void 0;const Je=Ie;Me.defaultHasher=function(){return new Je.FastHasher};var Ne={};Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.bytesToInteger=void 0,Ne.bytesToInteger=function(e){return e[3]|e[2]<<8|e[1]<<16|e[0]<<24};var Ke={};Object.defineProperty(Ke,"__esModule",{value:!0}),Ke.hash=Ke.hashOf=void 0;const Le=Me,Be=new Set;function Ue(e,t){return We(e,t),Be.clear(),t}function We(e,t){return null==e||Be.has(e)||(Be.add(e),"string"==typeof e?ze(e,t):"number"==typeof e?function(e,t){t.writeInteger(e)}(e,t):"boolean"==typeof e?function(e,t){t.writeInteger(!0===e?1:0)}(e,t):"symbol"==typeof e?function(e,t){ze(e.toString(),t)}(e,t):"function"==typeof e[Symbol.iterator]?function(e,t){for(const r of e)We(r,t)}(e,t):"number"==typeof e.length?function(e,t){for(let r=0,n=e.length;r<n;r++)We(e[r],t)}(e,t):function(e,t){for(const r in e)e.hasOwnProperty(r)&&(ze(r,t),We(e[r],t))}(e,t)),t}function ze(e,t){for(const r of e)t.writeInteger(r.charCodeAt(0))}Ke.hashOf=function(e,t=Le.defaultHasher){return Ue(e,t()).finish()},Ke.hash=Ue,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.smi=e.hash=e.hashOf=e.Hasher=e.FastHasher=e.bytesToInteger=e.defaultHasher=e.integerToBytes=void 0;var t=Ee;Object.defineProperty(e,"integerToBytes",{enumerable:!0,get:function(){return t.integerToBytes}});var r=Me;Object.defineProperty(e,"defaultHasher",{enumerable:!0,get:function(){return r.defaultHasher}});var n=Ne;Object.defineProperty(e,"bytesToInteger",{enumerable:!0,get:function(){return n.bytesToInteger}});var i=Ie;Object.defineProperty(e,"FastHasher",{enumerable:!0,get:function(){return i.FastHasher}});var o=Te;Object.defineProperty(e,"Hasher",{enumerable:!0,get:function(){return o.Hasher}});var s=Ke;Object.defineProperty(e,"hashOf",{enumerable:!0,get:function(){return s.hashOf}}),Object.defineProperty(e,"hash",{enumerable:!0,get:function(){return s.hash}});var a=De;Object.defineProperty(e,"smi",{enumerable:!0,get:function(){return a.smi}})}(Se);var Ve={},qe={},Xe={},Ye={},Ge={};Object.defineProperty(Ge,"__esModule",{value:!0}),Ge.toJS=void 0,Ge.toJS=function(e){return null!=e&&"function"==typeof e.toJS?e.toJS():e};var Qe={};Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.toJSON=void 0,Qe.toJSON=function(e){return null!=e&&"function"==typeof e.toJSON?e.toJSON():e},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.none=e.some=e.Option=void 0;const t=Ge,r=Qe,n={},i={};class o{constructor(e,t){if(e!==n)throw new TypeError("Options can only be created with the some or none functions");this._value=t}static some(t){return e.some(t)}static none(){return e.none()}static from(t){return null!=t?e.some(t):e.none()}static fromResult(t){return t.isOk()?e.some(t.unwrap()):e.none()}isNone(){return this._value===i}isSome(){return!this.isNone()}expect(e){if(this.isSome())return this._value;throw new Error("function"==typeof e?e():e)}unwrap(){return this.expect("Tried to unwrap value of none Option")}unwrapOr(e){return this.isSome()?this._value:e}unwrapOrElse(e){return this.isSome()?this._value:e()}map(t){return this.isSome()?e.some(t(this._value)):e.none()}mapOr(t,r){return this.isSome()?e.some(t(this._value)):e.some(r)}mapOrElse(t,r){return this.isSome()?e.some(t(this._value)):e.some(r())}flatMap(t){return this.isSome()?t(this._value):e.none()}flatMapOr(e,t){return this.isSome()?e(this._value):t}flatMapOrElse(e,t){return this.isSome()?e(this._value):t()}and(t){return this.isSome()?t:e.none()}andThen(t){return this.isSome()?t(this._value):e.none()}or(e){return this.isNone()?e:this}orElse(e){return this.isNone()?e():this}xor(t){const r=this.isSome(),n=t.isSome();return r&&!n?this:!r&&n?t:e.none()}filter(t){return this.isSome()&&t(this._value)?this:e.none()}getOrInsert(e){return this.isNone()&&(this._value=e),this}getOrInsertWith(e){return this.isNone()&&(this._value=e()),this}take(){if(this.isSome()){const t=this._value;return this._value=i,e.some(t)}return e.none()}from(e){return null!=e?this._value=e:this.clear(),this}replace(e){return this._value=e,this}clear(){return this._value=i,this}fromResult(t){return t.isOk()?e.some(t.unwrap()):e.none()}ifSome(e,t){return this.isSome()?e(this._value):t&&t(),this}ifNone(e,t){return this.isNone()?e():t&&t(this._value),this}fromJSON(e){return o.from(e)}toJSON(){return this.map(r.toJSON).unwrapOr(null)}toJS(){return this.map(t.toJS).unwrapOr(null)}}e.Option=o;e.some=e=>new o(n,e);e.none=()=>new o(n,i)}(Ye),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.none=e.some=e.Option=void 0;var t=Ye;Object.defineProperty(e,"Option",{enumerable:!0,get:function(){return t.Option}}),Object.defineProperty(e,"some",{enumerable:!0,get:function(){return t.some}}),Object.defineProperty(e,"none",{enumerable:!0,get:function(){return t.none}})}(Xe),Object.defineProperty(qe,"__esModule",{value:!0}),qe.iter=qe.Iter=void 0;const Ze=Xe;class et{constructor(e){this._index=0,this._iter=e}[Symbol.iterator](){return this}iter(){return this}next(){return this._iter.next()}nextWithIndex(){const e=this._iter.next();return e.done?e:{value:[e.value,this._index++]}}enumerate(){}peekable(){}forEach(e){}map(e){}merge(e){}concat(e){return this.merge(e)}filter(e){}step(e){}skip(e){}take(e){}toMap(e,t){}count(){return this.reduce(0,(e=>e+1))}consume(){let e=this.next();for(;!e.done;)e=this.next();return this}toArray(){return this.reduce([],((e,t)=>(e.push(t),e)))}join(e){return this.toArray().join(e)}indexOf(e){let t=this.next(),r=0;for(;!t.done;){if(t.value===e)return r;r++,t=this.next()}return-1}findIndex(e){let t=this.nextWithIndex();for(;!t.done;){const[r,n]=t.value;if(e(r,n))return n;t=this.nextWithIndex()}return-1}find(e){let t=this.nextWithIndex();for(;!t.done;){const[r,n]=t.value;if(e(r,n))return Ze.some(r);t=this.nextWithIndex()}return Ze.none()}findAll(e){return this.filter(e)}nth(e=0){let t=this.next();for(e<0&&(e=0);!t.done;){if(e--<=0)return Ze.some(t.value);t=this.next()}return Ze.none()}first(){return this.nth(0)}last(){let e=this.next();for(;!e.done;){const t=this.next();if(t.done)return Ze.some(e.value);e=t}return Ze.none()}any(e){return-1!==this.findIndex(e)}some(e){return this.any(e)}none(e){return-1===this.findIndex(e)}all(e){let t=this.nextWithIndex();for(;!t.done;){const[r,n]=t.value;if(!e(r,n))return!1;t=this.nextWithIndex()}return!0}unflatten(e){}reduce(e,t){let r=this.next();for(;!r.done;){e=t(e,r.value,this._index-1),r=this.next()}return e}reverse(){return tt(this.toArray().reverse())}}function tt(e){return null!=e?"function"==typeof e[Symbol.iterator]?new et(e[Symbol.iterator]()):"function"==typeof e.next?e instanceof et?e:new et(e):tt("object"==typeof e?Object.entries(e):[e]):tt([])}qe.Iter=et,qe.iter=tt;var rt={};Object.defineProperty(rt,"__esModule",{value:!0}),rt.Enumerate=void 0;const nt=qe;class it extends nt.Iter{constructor(e){super(e)}next(){const e=super.nextWithIndex();return e.done?e:{value:ot(e.value)}}}function ot(e){const t=e[0],r=e;return r[0]=e[1],r[1]=t,r}rt.Enumerate=it,nt.Iter.prototype.enumerate=function(){return new it(this)};var st={};Object.defineProperty(st,"__esModule",{value:!0}),st.Filter=void 0;const at=qe;class ut extends at.Iter{constructor(e,t){super(e),this._fn=t}next(){let e=super.nextWithIndex();for(;!e.done;){const[t,r]=e.value;if(this._fn(t,r))return{done:!1,value:t};e=super.nextWithIndex()}return{done:!0,value:void 0}}}st.Filter=ut,at.Iter.prototype.filter=function(e){return new ut(this,e)};var ct={};Object.defineProperty(ct,"__esModule",{value:!0}),ct.ForEach=void 0;const ht=qe;class lt extends ht.Iter{constructor(e,t){super(e),this._fn=([e,r])=>(t(e,r),e)}next(){const e=super.nextWithIndex();return e.done?e:{done:!1,value:this._fn(e.value)}}}ct.ForEach=lt,ht.Iter.prototype.forEach=function(e){return new lt(this,e)};var ft={};Object.defineProperty(ft,"__esModule",{value:!0}),ft.Map=void 0;const dt=qe;class pt extends dt.Iter{constructor(e,t){super(e),this._fn=([e,r])=>t(e,r)}next(){const e=super.nextWithIndex();return e.done?e:{done:!1,value:this._fn(e.value)}}}ft.Map=pt,dt.Iter.prototype.map=function(e){return new pt(this,e)};var mt={};Object.defineProperty(mt,"__esModule",{value:!0}),mt.Merge=void 0;const vt=qe;class gt extends vt.Iter{constructor(e,t){super(e),this._other=t}next(){const e=super.next();return e.done?this._other.next():e}}mt.Merge=gt,vt.Iter.prototype.merge=function(e){return new gt(this,e)};var bt={};Object.defineProperty(bt,"__esModule",{value:!0}),bt.Peekable=void 0;const yt=Xe,_t=qe;class Ot extends _t.Iter{constructor(){super(...arguments),this.peeked=[]}unpeekAll(){return this.peeked.length=0,this}unpeek(){return this.peeked.length>0?yt.some(this.peeked.shift()):yt.none()}peek(e=0){if(e<this.peeked.length)return yt.some(this.peeked[e]);{let t=this.peeked.length-e-1,r=super.next();for(;!(r.done||(this.peeked.push(r.value),--t<=0));)r=super.next();return r.done?yt.none():yt.some(r.value)}}next(){const e=this.unpeek();if(e.isSome())return{done:!1,value:e.unwrap()};const t=super.next();return t.done?t:{done:!1,value:t.value}}}bt.Peekable=Ot,_t.Iter.prototype.peekable=function(){return new Ot(this)};var wt={};Object.defineProperty(wt,"__esModule",{value:!0}),wt.Skip=void 0;const kt=qe;class xt extends kt.Iter{constructor(e,t){super(e),this._skipped=0,this._skip=0|(t<=0?0:t)}next(){let e=super.next();for(;!e.done;){if(!(this._skipped<=this._skip))return e;this._skipped+=1,e=super.next()}return{done:!0,value:void 0}}}wt.Skip=xt,kt.Iter.prototype.skip=function(e){return new xt(this,e)};var Pt={};Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.Step=void 0;const jt=qe;class St extends jt.Iter{constructor(e,t){super(e),this._stepped=0,this._step=t<=0?1:0|t}next(){let e=super.next();for(;!e.done;){if(!(this._stepped<this._step))return this._stepped=0,e;this._stepped+=1,e=super.next()}return{done:!0,value:void 0}}}Pt.Step=St,jt.Iter.prototype.step=function(e){return new St(this,e)};var Et={};Object.defineProperty(Et,"__esModule",{value:!0}),Et.Take=void 0;const Mt=qe;class It extends Mt.Iter{constructor(e,t){super(e),this._taken=0,this._count=0|(t<=0?0:t)}next(){return this._taken<this._count?(this._taken+=1,super.next()):{done:!0,value:void 0}}}Et.Take=It,Mt.Iter.prototype.take=function(e){return new It(this,e)};var Tt={};Object.defineProperty(Tt,"__esModule",{value:!0}),Tt.ToMap=void 0;const $t=qe,Ft=e=>e,At=e=>e;class Dt extends $t.Iter{constructor(e,t=Ft,r=At){super(e),this._map=([e,n])=>[t(e,n),r(e,n)]}toObject(){return this.reduce({},((e,t)=>(e[t[0]]=t[1],e)))}next(){const e=super.nextWithIndex();return e.done?e:{done:!1,value:this._map(e.value)}}}Tt.ToMap=Dt,$t.Iter.prototype.toMap=function(e,t){return new Dt(this,e,t)};var Rt={};Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.Unflatten=void 0;const Ht=qe;class Ct extends Ht.Iter{constructor(e,t){super(e),this._fn=t}next(){return this._fn(this._iter)}}Rt.Unflatten=Ct,Ht.Iter.prototype.unflatten=function(e){return new Ct(this,e)},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Unflatten=e.ToMap=e.Take=e.Step=e.Skip=e.Peekable=e.Merge=e.Map=e.ForEach=e.Filter=e.Enumerate=e.iter=e.Iter=void 0;var t=qe;Object.defineProperty(e,"Iter",{enumerable:!0,get:function(){return t.Iter}}),Object.defineProperty(e,"iter",{enumerable:!0,get:function(){return t.iter}});var r=rt;Object.defineProperty(e,"Enumerate",{enumerable:!0,get:function(){return r.Enumerate}});var n=st;Object.defineProperty(e,"Filter",{enumerable:!0,get:function(){return n.Filter}});var i=ct;Object.defineProperty(e,"ForEach",{enumerable:!0,get:function(){return i.ForEach}});var o=ft;Object.defineProperty(e,"Map",{enumerable:!0,get:function(){return o.Map}});var s=mt;Object.defineProperty(e,"Merge",{enumerable:!0,get:function(){return s.Merge}});var a=bt;Object.defineProperty(e,"Peekable",{enumerable:!0,get:function(){return a.Peekable}});var u=wt;Object.defineProperty(e,"Skip",{enumerable:!0,get:function(){return u.Skip}});var c=Pt;Object.defineProperty(e,"Step",{enumerable:!0,get:function(){return c.Step}});var h=Et;Object.defineProperty(e,"Take",{enumerable:!0,get:function(){return h.Take}});var l=Tt;Object.defineProperty(e,"ToMap",{enumerable:!0,get:function(){return l.ToMap}});var f=Rt;Object.defineProperty(e,"Unflatten",{enumerable:!0,get:function(){return f.Unflatten}})}(Ve);var Jt={},Nt={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.range=e.Range=e.RangeDirection=void 0;const t=Ve;var r,n;(n=r=e.RangeDirection||(e.RangeDirection={}))[n.Forward=0]="Forward",n[n.Backward=1]="Backward";class i{constructor(e,t,n=1){this.start=e,this.end=t,this.step=Math.abs(n),this.direction=e>t?r.Backward:r.Forward}static from(e,t,r=1){return new i(e,t,r)}getStart(){return this.start}getEnd(){return this.end}getStep(){return this.step}getDirection(){return this.direction}contains(e){return this.start<=e&&e<=this.end}isEmpty(){return this.direction===r.Forward?this.start>this.end:this.start<this.end}iter(){return new t.Iter(this)}[Symbol.iterator](){return this}next(){if(this.isEmpty())return{done:!0,value:void 0};{const e=this.start;return this.direction===r.Forward?this.start+=this.step:this.start-=this.step,{done:!1,value:e}}}}e.Range=i,e.range=i.from}(Nt);var Kt={};Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.rangeFrom=Kt.RangeFrom=void 0;const Lt=Nt;class Bt extends Lt.Range{static from(e,t=Lt.RangeDirection.Forward,r=1){return new Bt(e,t,r)}constructor(e,t=Lt.RangeDirection.Forward,r=1){t===Lt.RangeDirection.Forward?super(e,1/0,r):super(e,-1/0,r)}}Kt.RangeFrom=Bt,Kt.rangeFrom=Bt.from,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RangeFrom=e.rangeFrom=e.RangeDirection=e.range=e.Range=void 0;var t=Nt;Object.defineProperty(e,"Range",{enumerable:!0,get:function(){return t.Range}}),Object.defineProperty(e,"range",{enumerable:!0,get:function(){return t.range}}),Object.defineProperty(e,"RangeDirection",{enumerable:!0,get:function(){return t.RangeDirection}});var r=Kt;Object.defineProperty(e,"rangeFrom",{enumerable:!0,get:function(){return r.rangeFrom}}),Object.defineProperty(e,"RangeFrom",{enumerable:!0,get:function(){return r.RangeFrom}})}(Jt);var Ut={},Wt={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.err=e.ok=e.Result=void 0;const t=Ge,r=Qe,n={},i={};class o{constructor(e,t,r){if(e!==n)throw new TypeError("Results can only be created with the ok or err functions");this._ok=t,this._err=r}static ok(t){return e.ok(t)}static err(t){return e.err(t)}static fromOption(t,r="Tried to create Result from none Option"){return t.isSome()?e.ok(t.unwrap()):e.err(new Error(r))}isErr(){return this._err!==i}isOk(){return this._ok!==i}expect(){if(this.isOk())return this._ok;throw this._err}unwrap(){return this.expect()}unwrapOr(e){return this.isOk()?this._ok:e}unwrapOrElse(e){return this.isOk()?this._ok:e(this._err)}map(t){return this.isOk()?e.ok(t(this._ok)):e.err(this._err)}mapOr(t,r){return this.isOk()?e.ok(t(this._ok)):e.ok(r)}mapOrElse(t,r){return this.isOk()?e.ok(t(this._ok)):e.ok(r(this._err))}flatMap(t){return this.isOk()?t(this._ok):e.err(this._err)}flatMapOr(e,t){return this.isOk()?e(this._ok):t}flatMapOrElse(e,t){return this.isOk()?e(this._ok):t(this._err)}expectErr(e){if(this.isErr())return this._err;throw new Error("function"==typeof e?e():e)}unwrapErr(){return this.expectErr("Tried to unwrap error value of ok Result")}unwrapErrOr(e){return this.isErr()?this._err:e}unwrapErrOrElse(e){return this.isErr()?this._err:e(this._ok)}mapErr(t){return this.isErr()?e.err(t(this._err)):e.ok(this._ok)}mapErrOr(t,r){return this.isErr()?e.err(t(this._err)):e.err(r)}mapErrOrElse(t,r){return this.isErr()?e.err(t(this._err)):e.err(r(this._ok))}flatMapErr(t){return this.isErr()?t(this._err):e.ok(this._ok)}flatMapErrOr(e,t){return this.isErr()?e(this._err):t}flatMapErrOrElse(e,t){return this.isErr()?e(this._err):t(this._ok)}and(t){return this.isOk()?t:e.err(this._err)}andThen(t){return this.isOk()?t(this._ok):e.err(this._err)}or(e){return this.isErr()?e:this}orElse(e){return this.isErr()?e(this._err):this}ifOk(e,t){return this.isOk()?e(this._ok):t&&t(this._err),this}ifErr(e,t){return this.isErr()?e(this._err):t&&t(this._ok),this}fromJSON(t){if(t){if(t.ok)return e.ok(t.ok);if(t.err)return e.err(t.err)}throw new TypeError("Invalid json for Result")}toJSON(){return this.isOk()?{ok:this.map(r.toJSON).unwrap()}:{err:this.mapErr(r.toJSON).unwrapErr()}}toJS(){return this.isOk()?{ok:this.map(t.toJS).unwrap()}:{err:this.mapErr(t.toJS).unwrapErr()}}}e.Result=o;e.ok=e=>new o(n,e,i);e.err=e=>new o(n,i,e)}(Wt),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.err=e.ok=e.Result=void 0;var t=Wt;Object.defineProperty(e,"Result",{enumerable:!0,get:function(){return t.Result}}),Object.defineProperty(e,"ok",{enumerable:!0,get:function(){return t.ok}}),Object.defineProperty(e,"err",{enumerable:!0,get:function(){return t.err}})}(Ut),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.toJSON=e.toJS=e.Result=e.err=e.ok=e.RangeDirection=e.RangeFrom=e.Range=e.rangeFrom=e.range=e.Option=e.none=e.some=e.Unflatten=e.ToMap=e.Take=e.Step=e.Skip=e.Peekable=e.Merge=e.Map=e.Iter=e.iter=e.ForEach=e.Filter=e.Enumerate=e.hashOf=e.hash=e.defaultHasher=e.FastHasher=e.Hasher=e.bytesToInteger=e.integerToBytes=void 0;var t=Se;Object.defineProperty(e,"integerToBytes",{enumerable:!0,get:function(){return t.integerToBytes}}),Object.defineProperty(e,"bytesToInteger",{enumerable:!0,get:function(){return t.bytesToInteger}}),Object.defineProperty(e,"Hasher",{enumerable:!0,get:function(){return t.Hasher}}),Object.defineProperty(e,"FastHasher",{enumerable:!0,get:function(){return t.FastHasher}}),Object.defineProperty(e,"defaultHasher",{enumerable:!0,get:function(){return t.defaultHasher}}),Object.defineProperty(e,"hash",{enumerable:!0,get:function(){return t.hash}}),Object.defineProperty(e,"hashOf",{enumerable:!0,get:function(){return t.hashOf}});var r=Ve;Object.defineProperty(e,"Enumerate",{enumerable:!0,get:function(){return r.Enumerate}}),Object.defineProperty(e,"Filter",{enumerable:!0,get:function(){return r.Filter}}),Object.defineProperty(e,"ForEach",{enumerable:!0,get:function(){return r.ForEach}}),Object.defineProperty(e,"iter",{enumerable:!0,get:function(){return r.iter}}),Object.defineProperty(e,"Iter",{enumerable:!0,get:function(){return r.Iter}}),Object.defineProperty(e,"Map",{enumerable:!0,get:function(){return r.Map}}),Object.defineProperty(e,"Merge",{enumerable:!0,get:function(){return r.Merge}}),Object.defineProperty(e,"Peekable",{enumerable:!0,get:function(){return r.Peekable}}),Object.defineProperty(e,"Skip",{enumerable:!0,get:function(){return r.Skip}}),Object.defineProperty(e,"Step",{enumerable:!0,get:function(){return r.Step}}),Object.defineProperty(e,"Take",{enumerable:!0,get:function(){return r.Take}}),Object.defineProperty(e,"ToMap",{enumerable:!0,get:function(){return r.ToMap}}),Object.defineProperty(e,"Unflatten",{enumerable:!0,get:function(){return r.Unflatten}});var n=Xe;Object.defineProperty(e,"some",{enumerable:!0,get:function(){return n.some}}),Object.defineProperty(e,"none",{enumerable:!0,get:function(){return n.none}}),Object.defineProperty(e,"Option",{enumerable:!0,get:function(){return n.Option}});var i=Jt;Object.defineProperty(e,"range",{enumerable:!0,get:function(){return i.range}}),Object.defineProperty(e,"rangeFrom",{enumerable:!0,get:function(){return i.rangeFrom}}),Object.defineProperty(e,"Range",{enumerable:!0,get:function(){return i.Range}}),Object.defineProperty(e,"RangeFrom",{enumerable:!0,get:function(){return i.RangeFrom}}),Object.defineProperty(e,"RangeDirection",{enumerable:!0,get:function(){return i.RangeDirection}});var o=Ut;Object.defineProperty(e,"ok",{enumerable:!0,get:function(){return o.ok}}),Object.defineProperty(e,"err",{enumerable:!0,get:function(){return o.err}}),Object.defineProperty(e,"Result",{enumerable:!0,get:function(){return o.Result}});var s=Ge;Object.defineProperty(e,"toJS",{enumerable:!0,get:function(){return s.toJS}});var a=Qe;Object.defineProperty(e,"toJSON",{enumerable:!0,get:function(){return a.toJSON}})}(je);const zt={toVector:(e,t)=>(void 0===e&&(e=t),Array.isArray(e)?e:[e,e]),add:(e,t)=>[e[0]+t[0],e[1]+t[1]],sub:(e,t)=>[e[0]-t[0],e[1]-t[1]],addTo(e,t){e[0]+=t[0],e[1]+=t[1]},subTo(e,t){e[0]-=t[0],e[1]-=t[1]}};function Vt(e,t,r){return 0===t||Math.abs(t)===1/0?Math.pow(e,5*r):e*t*r/(t+r*e)}function qt(e,t,r,n=.15){return 0===n?function(e,t,r){return Math.max(t,Math.min(e,r))}(e,t,r):e<t?-Vt(t-e,r-t,n)+t:e>r?+Vt(e-r,r-t,n)+r:e}function Xt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Gt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Yt(Object(r),!0).forEach((function(t){Xt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Qt={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function Zt(e){return e?e[0].toUpperCase()+e.slice(1):""}function er(e){return"touches"in e}function tr(e){return er(e)?function(e){return"touchend"===e.type?e.changedTouches:e.targetTouches}(e)[0]:e}function rr(e){return function(e){return Array.from(e.touches).filter((t=>{var r,n;return t.target===e.currentTarget||(null===(r=e.currentTarget)||void 0===r||null===(n=r.contains)||void 0===n?void 0:n.call(r,t.target))}))}(e).map((e=>e.identifier))}function nr(e){const t=tr(e);return er(e)?t.identifier:t.pointerId}function ir(e){const t=tr(e);return[t.clientX,t.clientY]}function or(e,...t){return"function"==typeof e?e(...t):e}function sr(){}function ar(...e){return 0===e.length?sr:1===e.length?e[0]:function(){let t;for(const r of e)t=r.apply(this,arguments)||t;return t}}function ur(e,t){return Object.assign({},t,e||{})}class cr extends class{constructor(e,t,r){this.ctrl=e,this.args=t,this.key=r,this.state||(this.state={values:[0,0],initial:[0,0]},this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,config:r,ingKey:n,args:i}=this,{transform:o,threshold:s=[0,0]}=r;t[n]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._delta=[0,0],e._threshold=zt.sub(o(s),o([0,0])).map(Math.abs),e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=i,e.axis=void 0,e.memo=void 0,e.elapsedTime=0,e.direction=[0,0],e.distance=[0,0],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,r=this.config;t._active||(this.reset(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.initial=t.values,t.lastOffset=r.from?or(r.from,t):t.offset,t.offset=t.lastOffset),t.startTime=t.timeStamp=e.timeStamp}compute(e){const{state:t,config:r,shared:n}=this;t.args=this.args;let i=0;if(e&&(t.event=e,t.type=e.type,n.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,n.locked=!!document.pointerLockElement,Object.assign(n,function(e){const t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){const{shiftKey:r,altKey:n,metaKey:i,ctrlKey:o}=e;Object.assign(t,{shiftKey:r,altKey:n,metaKey:i,ctrlKey:o})}return t}(e)),n.down=n.pressed=n.buttons%2==1||n.touches>0,i=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const e=t._delta.map(Math.abs);zt.addTo(t._distance,e)}const[o,s]=r.transform(t._movement),[a,u]=t._threshold;let[c,h]=t._step;if(!1===c&&(c=Math.abs(o)>=a&&Math.sign(o)*a),!1===h&&(h=Math.abs(s)>=u&&Math.sign(s)*u),t.intentional=!1!==c||!1!==h,!t.intentional)return;t._step=[c,h];const l=[0,0];if(l[0]=!1!==c?o-c:0,l[1]=!1!==h?s-h:0,this.intent&&this.intent(l),(t._active&&!t._blocked||t.active)&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=n[this.ingKey]=t._active,e)){t.first&&("bounds"in r&&(t._bounds=or(r.bounds,t)),this.setup&&this.setup());const e=t.movement;if(t.movement=l,this.computeOffset(),!t.last){t.delta=zt.sub(l,e);const r=t.delta.map(Math.abs);zt.addTo(t.distance,r),t.direction=t.delta.map(Math.sign),!t.first&&i>0&&(t.velocity=[r[0]/i,r[1]/i])}}const f=t._active&&r.rubberband||[0,0];t.offset=function(e,[t,r],[n,i]){const[[o,s],[a,u]]=e;return[qt(t,o,s,n),qt(r,a,u,i)]}(t._bounds,t.offset,f),this.computeMovement()}emit(){const e=this.state,t=this.shared,r=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!r.triggerAllEvents)return;const n=this.handler(Gt(Gt(Gt({},t),e),{},{[this.aliasKey]:e.values}));void 0!==n&&(e.memo=n)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}{constructor(...e){super(...e),Xt(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=zt.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=zt.sub(this.state.offset,this.state.lastOffset)}intent(e){this.state.axis=this.state.axis||function([e,t]){const r=Math.abs(e)-Math.abs(t);return r>0?"x":r<0?"y":void 0}(e),this.state._blocked=(this.config.lockDirection||!!this.config.axis)&&!this.state.axis||!!this.config.axis&&this.config.axis!==this.state.axis,this.state._blocked||(this.config.axis||this.config.lockDirection)&&function(e,t){switch(t){case"x":e[1]=0;break;case"y":e[0]=0}}(e,this.state.axis)}}const hr={enabled:(e=!0)=>e,triggerAllEvents:(e=!1)=>e,rubberband(e=0){switch(e){case!0:return[.15,.15];case!1:return[0,0];default:return zt.toVector(e)}},from:e=>"function"==typeof e?e:null!=e?zt.toVector(e):void 0,transform:(e,t,r)=>e||r.shared.transform},lr=Gt(Gt({},hr),{},{axis(e,t,{axis:r}){if(this.lockDirection="lock"===r,!this.lockDirection)return r},bounds(e={}){if("function"==typeof e)return t=>lr.bounds(e(t));if("current"in e)return()=>e.current;if("function"==typeof HTMLElement&&e instanceof HTMLElement)return e;const{left:t=-1/0,right:r=1/0,top:n=-1/0,bottom:i=1/0}=e;return[[t,r],[n,i]]}}),fr={ArrowRight:(e=1)=>[10*e,0],ArrowLeft:(e=1)=>[-10*e,0],ArrowUp:(e=1)=>[0,-10*e],ArrowDown:(e=1)=>[0,10*e]};const dr="undefined"!=typeof window&&window.document&&window.document.createElement;function pr(){return dr&&"ontouchstart"in window}const mr={isBrowser:dr,gesture:function(){try{return"constructor"in GestureEvent}catch(e){return!1}}(),touch:pr(),touchscreen:pr()||dr&&navigator.maxTouchPoints>1,pointer:dr&&"onpointerdown"in window,pointerLock:dr&&"exitPointerLock"in window.document},vr=Gt(Gt({},lr),{},{pointerLock(e,t,{pointer:{lock:r=!1,touch:n=!1}={}}){return this.useTouch=mr.touch&&n,mr.pointerLock&&r},device(e,t){return this.useTouch?"touch":this.pointerLock?"mouse":mr.pointer?"pointer":mr.touch?"touch":"mouse"},preventScroll(e=!1,t,{preventScrollAxis:r="y"}){return r&&(this.preventScrollAxis=r),!!mr.touchscreen&&("number"==typeof e?e:!!e&&250)},pointerCapture(e,t,{pointer:{capture:r=!0}={}}){return!this.pointerLock&&"pointer"===this.device&&r},threshold(e,t,{filterTaps:r=!1,axis:n}){const i=zt.toVector(e,r?3:n?1:0);return this.filterTaps=r,i},swipe({velocity:e=.5,distance:t=50,duration:r=250}={}){return{velocity:this.transform(zt.toVector(e)),distance:this.transform(zt.toVector(t)),duration:r}},delay(e=0){switch(e){case!0:return 180;case!1:return 0;default:return e}}});Gt(Gt({},hr),{},{useTouch:(e,t,{pointer:{touch:r=!1}={}})=>mr.touch&&r,device(e,t,r){if(r.shared.target&&!mr.touch&&mr.gesture)return"gesture";if(this.useTouch)return"touch";if(mr.touchscreen){if(mr.pointer)return"pointer";if(mr.touch)return"touch"}},bounds(e,t,{scaleBounds:r={},angleBounds:n={}}){const i=e=>{const t=ur(or(r,e),{min:-1/0,max:1/0});return[t.min,t.max]},o=e=>{const t=ur(or(n,e),{min:-1/0,max:1/0});return[t.min,t.max]};return"function"!=typeof r&&"function"!=typeof n?[i(),o()]:e=>[i(e),o(e)]},threshold(e,t,r){this.lockDirection="lock"===r.axis;return zt.toVector(e,this.lockDirection?[.1,3]:0)}}),Gt(Gt({},lr),{},{mouseOnly:(e=!0)=>e});const gr=lr;Gt(Gt({},lr),{},{mouseOnly:(e=!0)=>e});const br=new Map,yr=new Map;function _r(e){br.set(e.key,e.engine),yr.set(e.key,e.resolver)}const Or={key:"drag",engine:class extends cr{constructor(...e){super(...e),Xt(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),r=e.currentTarget.getBoundingClientRect(),n={left:t.left-r.left+e.offset[0],right:t.right-r.right+e.offset[0],top:t.top-r.top+e.offset[1],bottom:t.bottom-r.bottom+e.offset[1]};e._bounds=lr.bounds(n)}}cancel(){const e=this.state;e.canceled||setTimeout((()=>{e.canceled=!0,e._active=!1,this.compute(),this.emit()}),0)}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){if(null!=e.buttons&&e.buttons%2!=1)return;this.ctrl.setEventIds(e),this.config.pointerCapture&&e.target.setPointerCapture(e.pointerId);const t=this.state,r=this.config;t._pointerActive||(this.start(e),this.setupPointer(e),t._pointerId=nr(e),t._pointerActive=!0,t.values=ir(e),t.initial=t.values,r.preventScroll?this.setupScrollPrevention(e):r.delay>0?this.setupDelayTrigger(e):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,r=this.config;if(!t._pointerActive)return;if(t.type===e.type&&e.timeStamp===t.timeStamp)return;const n=nr(e);if(t._pointerId&&n!==t._pointerId)return;const i=ir(e);return document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=zt.sub(i,t.values),t.values=i),zt.addTo(t._movement,t._delta),this.compute(e),t._delayed?(this.timeoutStore.remove("dragDelay"),void this.startPointerDrag(e)):r.preventScroll&&!t._preventScroll?t.axis?t.axis===r.preventScrollAxis||"xy"===r.preventScrollAxis?(t._active=!1,void this.clean()):(this.timeoutStore.remove("startPointerDrag"),void this.startPointerDrag(e)):void 0:void this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch(s){}const t=this.state,r=this.config;if(!t._pointerActive)return;const n=nr(e);if(t._pointerId&&n!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[i,o]=t._distance;if(t.tap=i<=3&&o<=3,t.tap&&r.filterTaps)t._force=!0;else{const[e,n]=t.direction,[i,o]=t.velocity,[s,a]=t.movement,[u,c]=r.swipe.velocity,[h,l]=r.swipe.distance,f=r.swipe.duration;t.elapsedTime<f&&(Math.abs(i)>u&&Math.abs(s)>h&&(t.swipe[0]=e),Math.abs(o)>c&&Math.abs(a)>l&&(t.swipe[1]=n))}this.emit()}pointerClick(e){this.state.tap||(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config;let r=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){!function(e){"persist"in e&&"function"==typeof e.persist&&e.persist()}(e),this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1}),this.eventStore.add(this.sharedConfig.window,"touch","end",this.clean.bind(this),{passive:!1}),this.eventStore.add(this.sharedConfig.window,"touch","cancel",this.clean.bind(this),{passive:!1}),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScroll,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",this.startPointerDrag.bind(this),this.config.delay,e)}keyDown(e){const t=fr[e.key],r=this.state;if(t){const n=e.shiftKey?10:e.altKey?.1:1;r._delta=t(n),this.start(e),r._keyboardActive=!0,zt.addTo(r._movement,r._delta),this.compute(e),this.emit()}}keyUp(e){e.key in fr&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this))),e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this)),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0})}},resolver:vr},wr={key:"wheel",engine:class extends cr{constructor(...e){super(...e),Xt(this,"ingKey","wheeling")}wheel(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(e){const t=this.state;t._delta=function(e){let{deltaX:t,deltaY:r,deltaMode:n}=e;return 1===n?(t*=40,r*=40):2===n&&(t*=800,r*=800),[t,r]}(e),zt.addTo(this.state._movement,t._delta),this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("wheel","",this.wheel.bind(this))}},resolver:gr};function kr(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}const xr=e=>e,Pr={target(e){if(e)return()=>"current"in e?e.current:e},enabled:(e=!0)=>e,window:(e=(mr.isBrowser?window:void 0))=>e,eventOptions:({passive:e=!0,capture:t=!1}={})=>({passive:e,capture:t}),transform:(e=xr)=>e},jr=["target","eventOptions","window","enabled","transform"];function Sr(e={},t){const r={};for(const[n,i]of Object.entries(t))switch(typeof i){case"function":r[n]=i.call(r,e[n],n,e);break;case"object":r[n]=Sr(e[n],i);break;case"boolean":i&&(r[n]=e[n])}return r}class Er{constructor(e){Xt(this,"_listeners",[]),this._ctrl=e}add(e,t,r,n,i){const o=function(e,t=""){const r=Qt[e];return e+(r&&r[t]||t)}(t,r),s=Gt(Gt({},this._ctrl.config.shared.eventOptions),i);e.addEventListener(o,n,s),this._listeners.push((()=>e.removeEventListener(o,n,s)))}clean(){this._listeners.forEach((e=>e())),this._listeners=[]}}class Mr{constructor(){Xt(this,"_timeouts",new Map)}add(e,t,r=140,...n){this.remove(e),this._timeouts.set(e,window.setTimeout(t,r,...n))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach((e=>{window.clearTimeout(e)})),this._timeouts.clear()}}class Ir{constructor(e){Xt(this,"gestures",new Set),Xt(this,"_targetEventStore",new Er(this)),Xt(this,"gestureEventStores",{}),Xt(this,"gestureTimeoutStores",{}),Xt(this,"handlers",{}),Xt(this,"config",{}),Xt(this,"pointerIds",new Set),Xt(this,"touchIds",new Set),Xt(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),function(e,t){t.drag&&Tr(e,"drag");t.wheel&&Tr(e,"wheel");t.scroll&&Tr(e,"scroll");t.move&&Tr(e,"move");t.pinch&&Tr(e,"pinch");t.hover&&Tr(e,"hover")}(this,e)}setEventIds(e){er(e)?this.touchIds=new Set(rr(e)):"pointerId"in e&&("pointerup"===e.type?this.pointerIds.delete(e.pointerId):this.pointerIds.add(e.pointerId))}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=function(e,t){const r=e,{target:n,eventOptions:i,window:o,enabled:s,transform:a}=r,u=kr(r,jr),c={shared:Sr({target:n,eventOptions:i,window:o,enabled:s},Pr)};if(t){const e=yr.get(t);c[t]=Sr(Gt({shared:c.shared},u),e)}else for(const h in u){const e=yr.get(h);e&&(c[h]=Sr(Gt({shared:c.shared},u[h]),e))}return c}(e,t)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,r=t.eventOptions,n={};let i;if(t.target&&(i=t.target(),!i))return;const o=$r(n,r,!!i);if(t.enabled){for(const t of this.gestures)if(this.config[t].enabled){new(br.get(t))(this,e,t).bind(o)}for(const t in this.nativeHandlers)o(t,"",(r=>this.nativeHandlers[t](Gt(Gt({},this.state.shared),{},{event:r,args:e}))),void 0,!0)}for(const s in n)n[s]=ar(...n[s]);if(!i)return n;for(const s in n){let e=s.substr(2).toLowerCase();const t=!!~e.indexOf("capture"),r=!!~e.indexOf("passive");(t||r)&&(e=e.replace(/capture|passive/g,"")),this._targetEventStore.add(i,e,"",n[s],{capture:t,passive:r})}}}function Tr(e,t){e.gestures.add(t),e.gestureEventStores[t]=new Er(e),e.gestureTimeoutStores[t]=new Mr}const $r=(e,t,r)=>(n,i,o,s={},a=!1)=>{var u,c;const h=null!==(u=s.capture)&&void 0!==u?u:t.capture,l=null!==(c=s.passive)&&void 0!==c?c:t.passive;let f=a?n:function(e,t="",r=!1){const n=Qt[e],i=n&&n[t]||t;return"on"+Zt(e)+Zt(i)+(r?"Capture":"")}(n,i,h);r&&l&&(f+="Passive"),e[f]=e[f]||[],e[f].push(o)};function Fr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ar(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Dr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ar(Object(r),!0).forEach((function(t){Fr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ar(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Rr=function(e,t,r,n,i){this._gestureKey=n,this._ctrl=new Ir(t),this._ctrl.applyHandlers(t,i),this._ctrl.applyConfig(Dr(Dr({},r),{},{target:e}),this._gestureKey),this._ctrl.effect()};Rr.prototype.destroy=function(){this._ctrl.clean()};const Hr=function(e,t,r={}){return _r(Or),new Rr(e,{drag:t},r,"drag")},Cr=function(e,t,r={}){return _r(wr),new Rr(e,{wheel:t},r,"wheel")},Jr=[];function Nr(t,r=e){let n;const i=new Set;function o(e){if(s(t,e)&&(t=e,n)){const e=!Jr.length;for(const r of i)r[1](),Jr.push(r,t);if(e){for(let e=0;e<Jr.length;e+=2)Jr[e][0](Jr[e+1]);Jr.length=0}}}return{set:o,update:function(e){o(e(t))},subscribe:function(s,a=e){const u=[s,a];return i.add(u),1===i.size&&(n=r(o)||e),s(t),()=>{i.delete(u),0===i.size&&(n(),n=null)}}}}export{h as $,j as A,T as B,te as C,p as D,be as E,d as F,re as G,ye as H,ge as I,le as J,A as K,Hr as L,fe as M,ke as N,_e as O,C as P,Oe as Q,we as R,ce as S,Pe as T,xe as U,u as V,y as W,B as X,I as Y,l as Z,f as _,s as a,pe as a0,Nr as a1,Cr as a2,me as a3,de as a4,ve as a5,ne as a6,U as a7,_ as b,P as c,v as d,m as e,V as f,R as g,S as h,ue as i,g as j,b as k,je as l,a as m,e as n,k as o,ie as p,oe as q,Z as r,D as s,O as t,ee as u,se as v,w,G as x,Q as y,t as z};
