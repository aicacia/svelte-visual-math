import{setContext as t,getContext as e,SvelteComponent as n,init as i,safe_not_equal as r,svg_element as o,text as s,attr as a,insert as l,append as c,set_data as $,detach as d,noop as u,destroy_each as p,component_subscribe as y,empty as f,create_component as m,mount_component as h,transition_in as g,transition_out as x,destroy_component as v,space as w,group_outros as b,check_outros as k,assign as M,set_svg_attributes as O,toggle_class as S,get_spread_update as A,compute_rest_props as P,exclude_internal_props as L,get_spread_object as V,onMount as E,binding_callbacks as j,create_slot as z,element as R,add_render_callback as Y,add_resize_listener as N,update_slot_base as X,get_all_dirty_from_scope as q,get_slot_changes as H,bind as I,add_flush_callback as D}from"https://unpkg.com/svelte@3/internal/index.mjs";import{vec2 as B,mat2d as U}from"https://unpkg.com/gl-matrix@3/esm";import{range as W}from"https://unpkg.com/@aicacia/core@0/browser/index.js";import{D as K,W as T}from"./vendor.03e2906a.js";import{writable as C}from"https://unpkg.com/svelte@3/store/index.mjs";!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const n of t)if("childList"===n.type)for(const t of n.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerpolicy&&(e.referrerPolicy=t.referrerpolicy),"use-credentials"===t.crossorigin?e.credentials="include":"anonymous"===t.crossorigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();const F={};function G(){return e(F)}const J={};const Q={};const Z={};function _(){return e(Z)}function tt(t,e,n){return W(Math.floor(t/n)*n,Math.ceil(e/n)*n,n).iter().toArray()}function et(t,e,n){const i=t.slice();return i[9]=e[n],i}function nt(t){let e,n,i,r,u=(t[0]?t[0](t[9]):t[9])+"";return{c(){e=o("text"),n=s(u),a(e,"x",i=t[1](t[9])),a(e,"y",r=5),a(e,"alignment-baseline","hanging"),a(e,"text-anchor","middle")},m(t,i){l(t,e,i),c(e,n)},p(t,r){5&r&&u!==(u=(t[0]?t[0](t[9]):t[9])+"")&&$(n,u),6&r&&i!==(i=t[1](t[9]))&&a(e,"x",i)},d(t){t&&d(e)}}}function it(t){let e,n=t[2],i=[];for(let r=0;r<n.length;r+=1)i[r]=nt(et(t,n,r));return{c(){e=o("g");for(let t=0;t<i.length;t+=1)i[t].c();a(e,"class","svelte-133qdtd")},m(t,n){l(t,e,n);for(let r=0;r<i.length;r+=1)i[r].m(e,null)},p(t,[r]){if(7&r){let o;for(n=t[2],o=0;o<n.length;o+=1){const s=et(t,n,o);i[o]?i[o].p(s,r):(i[o]=nt(s),i[o].c(),i[o].m(e,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=n.length}},i:u,o:u,d(t){t&&d(e),p(i,t)}}}function rt(t,e,n){let i,r,o,s,a,{separation:l}=e,{labelMaker:c}=e,$=G();y(t,$,(t=>n(8,a=t)));let d=_();return y(t,d,(t=>n(7,s=t))),t.$$set=t=>{"separation"in t&&n(5,l=t.separation),"labelMaker"in t&&n(0,c=t.labelMaker)},t.$$.update=()=>{256&t.$$.dirty&&n(1,i=a.scaleX),128&t.$$.dirty&&n(6,r=s.xPanes),98&t.$$.dirty&&n(2,o=tt(r[0][0]-l,r[r.length-1][1]+l,l).filter((t=>Math.abs(i(t)-i(0))>1)))},[c,i,o,$,d,l,r,s,a]}class ot extends n{constructor(t){super(),i(this,t,rt,it,r,{separation:5,labelMaker:0})}}function st(t,e,n){const i=t.slice();return i[9]=e[n],i}function at(t){let e,n,i,r,u=(t[0]?t[0](t[9]):t[9])+"";return{c(){e=o("text"),n=s(u),a(e,"x",i=5),a(e,"y",r=t[1](t[9])),a(e,"alignment-baseline","central")},m(t,i){l(t,e,i),c(e,n)},p(t,i){5&i&&u!==(u=(t[0]?t[0](t[9]):t[9])+"")&&$(n,u),6&i&&r!==(r=t[1](t[9]))&&a(e,"y",r)},d(t){t&&d(e)}}}function lt(t){let e,n=t[2],i=[];for(let r=0;r<n.length;r+=1)i[r]=at(st(t,n,r));return{c(){e=o("g");for(let t=0;t<i.length;t+=1)i[t].c();a(e,"class","svelte-133qdtd")},m(t,n){l(t,e,n);for(let r=0;r<i.length;r+=1)i[r].m(e,null)},p(t,[r]){if(7&r){let o;for(n=t[2],o=0;o<n.length;o+=1){const s=st(t,n,o);i[o]?i[o].p(s,r):(i[o]=at(s),i[o].c(),i[o].m(e,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=n.length}},i:u,o:u,d(t){t&&d(e),p(i,t)}}}function ct(t,e,n){let i,r,o,s,a,{separation:l}=e,{labelMaker:c}=e,$=G();y(t,$,(t=>n(8,a=t)));let d=_();return y(t,d,(t=>n(7,s=t))),t.$$set=t=>{"separation"in t&&n(5,l=t.separation),"labelMaker"in t&&n(0,c=t.labelMaker)},t.$$.update=()=>{256&t.$$.dirty&&n(1,i=a.scaleY),128&t.$$.dirty&&n(6,r=s.yPanes),98&t.$$.dirty&&n(2,o=tt(r[0][0]-l,r[r.length-1][1]+l,l).filter((t=>Math.abs(i(t)-i(0))>1)))},[c,i,o,$,d,l,r,s,a]}class $t extends n{constructor(t){super(),i(this,t,ct,lt,r,{separation:5,labelMaker:0})}}function dt(t,e,n){const i=t.slice();return i[13]=e[n],i}function ut(t,e,n){const i=t.slice();return i[16]=e[n],i}function pt(t){let e,n,i,r,s;return{c(){e=o("line"),a(e,"x1",n=t[16]),a(e,"y1",i=0),a(e,"x2",r=t[16]),a(e,"y2",t[3]),a(e,"style",s="stroke: var(--grid-line-subdivision-color)")},m(t,n){l(t,e,n)},p(t,i){32&i&&n!==(n=t[16])&&a(e,"x1",n),32&i&&r!==(r=t[16])&&a(e,"x2",r),8&i&&a(e,"y2",t[3])},d(t){t&&d(e)}}}function yt(t){let e,n,i,r,s;return{c(){e=o("line"),a(e,"y1",n=t[13]),a(e,"x1",i=0),a(e,"y2",r=t[13]),a(e,"x2",t[4]),a(e,"style",s="stroke: var(--grid-line-subdivision-color)")},m(t,n){l(t,e,n)},p(t,i){64&i&&n!==(n=t[13])&&a(e,"y1",n),64&i&&r!==(r=t[13])&&a(e,"y2",r),16&i&&a(e,"x2",t[4])},d(t){t&&d(e)}}}function ft(t){let e,n,i,r,s,c,$,u;return{c(){e=o("line"),c=o("line"),a(e,"x1",n=0),a(e,"y1",i=0),a(e,"x2",r=0),a(e,"y2",t[3]),a(e,"style",s="stroke: var(--visual-math-line-color)"),a(c,"x1",t[4]),a(c,"y1",$=0),a(c,"x2",t[4]),a(c,"y2",t[3]),a(c,"style",u="stroke: var(--visual-math-line-color)")},m(t,n){l(t,e,n),l(t,c,n)},p(t,n){8&n&&a(e,"y2",t[3]),16&n&&a(c,"x1",t[4]),16&n&&a(c,"x2",t[4]),8&n&&a(c,"y2",t[3])},d(t){t&&d(e),t&&d(c)}}}function mt(t){let e,n,i,r,s,c,$,u;return{c(){e=o("line"),c=o("line"),a(e,"x1",n=0),a(e,"y1",i=0),a(e,"x2",t[4]),a(e,"y2",r=0),a(e,"style",s="stroke: var(--visual-math-line-color)"),a(c,"x1",$=0),a(c,"y1",t[3]),a(c,"x2",t[4]),a(c,"y2",t[3]),a(c,"style",u="stroke: var(--visual-math-line-color)")},m(t,n){l(t,e,n),l(t,c,n)},p(t,n){16&n&&a(e,"x2",t[4]),8&n&&a(c,"y1",t[3]),16&n&&a(c,"x2",t[4]),8&n&&a(c,"y2",t[3])},d(t){t&&d(e),t&&d(c)}}}function ht(t){let e,n,i,r,s=t[5],$=[];for(let o=0;o<s.length;o+=1)$[o]=pt(ut(t,s,o));let y=t[6],m=[];for(let o=0;o<y.length;o+=1)m[o]=yt(dt(t,y,o));let h=t[1]&&ft(t),g=t[2]&&mt(t);return{c(){e=o("pattern");for(let t=0;t<$.length;t+=1)$[t].c();n=f();for(let t=0;t<m.length;t+=1)m[t].c();i=f(),h&&h.c(),r=f(),g&&g.c(),a(e,"id",t[0]),a(e,"x","0"),a(e,"y","0"),a(e,"width",t[4]),a(e,"height",t[3]),a(e,"patternUnits","userSpaceOnUse")},m(t,o){l(t,e,o);for(let n=0;n<$.length;n+=1)$[n].m(e,null);c(e,n);for(let n=0;n<m.length;n+=1)m[n].m(e,null);c(e,i),h&&h.m(e,null),c(e,r),g&&g.m(e,null)},p(t,[o]){if(40&o){let i;for(s=t[5],i=0;i<s.length;i+=1){const r=ut(t,s,i);$[i]?$[i].p(r,o):($[i]=pt(r),$[i].c(),$[i].m(e,n))}for(;i<$.length;i+=1)$[i].d(1);$.length=s.length}if(80&o){let n;for(y=t[6],n=0;n<y.length;n+=1){const r=dt(t,y,n);m[n]?m[n].p(r,o):(m[n]=yt(r),m[n].c(),m[n].m(e,i))}for(;n<m.length;n+=1)m[n].d(1);m.length=y.length}t[1]?h?h.p(t,o):(h=ft(t),h.c(),h.m(e,r)):h&&(h.d(1),h=null),t[2]?g?g.p(t,o):(g=mt(t),g.c(),g.m(e,null)):g&&(g.d(1),g=null),1&o&&a(e,"id",t[0]),16&o&&a(e,"width",t[4]),8&o&&a(e,"height",t[3])},i:u,o:u,d(t){t&&d(e),p($,t),p(m,t),h&&h.d(),g&&g.d()}}}function gt(t,e,n){let i,r,o,s,a,{id:l}=e,{xLines:c=1}=e,{yLines:$=1}=e,{xSubdivisions:d=1}=e,{ySubdivisions:u=1}=e,p=G();y(t,p,(t=>n(12,a=t)));let f=[],m=[];return t.$$set=t=>{"id"in t&&n(0,l=t.id),"xLines"in t&&n(1,c=t.xLines),"yLines"in t&&n(2,$=t.yLines),"xSubdivisions"in t&&n(8,d=t.xSubdivisions),"ySubdivisions"in t&&n(9,u=t.ySubdivisions)},t.$$.update=()=>{if(4096&t.$$.dirty&&n(11,i=a.scaleX),4096&t.$$.dirty&&n(10,r=a.scaleY),2050&t.$$.dirty&&n(4,o=i(c||1)),1028&t.$$.dirty&&n(3,s=-r($||1)),272&t.$$.dirty&&d&&d>1){const t=o/d;n(5,f=W(0,o+1.1*t,t).iter().toArray())}if(520&t.$$.dirty&&u&&u>1){const t=s/u;n(6,m=W(0,s+1.1*t,t).iter().toArray())}},[l,c,$,s,o,f,m,p,d,u,r,i,a]}class xt extends n{constructor(t){super(),i(this,t,gt,ht,r,{id:0,xLines:1,yLines:2,xSubdivisions:8,ySubdivisions:9})}}function vt(t){let e,n;return e=new ot({props:{labelMaker:t[3].labels,separation:t[3].lines||1}}),{c(){m(e.$$.fragment)},m(t,i){h(e,t,i),n=!0},p(t,n){const i={};8&n&&(i.labelMaker=t[3].labels),8&n&&(i.separation=t[3].lines||1),e.$set(i)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){x(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function wt(t){let e,n;return e=new $t({props:{labelMaker:t[2].labels,separation:t[2].lines||1}}),{c(){m(e.$$.fragment)},m(t,i){h(e,t,i),n=!0},p(t,n){const i={};4&n&&(i.labelMaker=t[2].labels),4&n&&(i.separation=t[2].lines||1),e.$set(i)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){x(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function bt(t){let e,n,i,r,s;return{c(){e=o("line"),a(e,"x1",n=-1e7),a(e,"x2",i=1e7),a(e,"y1",r=0),a(e,"y2",s=0),a(e,"class","transform-y-to-center svelte-xqsvde")},m(t,n){l(t,e,n)},d(t){t&&d(e)}}}function kt(t){let e,n,i,r,s;return{c(){e=o("line"),a(e,"x1",n=0),a(e,"x2",i=0),a(e,"y1",r=-1e7),a(e,"y2",s=1e7),a(e,"class","transform-x-to-center svelte-xqsvde")},m(t,n){l(t,e,n)},d(t){t&&d(e)}}}function Mt(t){let e,n,i,r,s,c,$,u,p,y;n=new xt({props:{id:t[4],xLines:t[3].lines,yLines:t[2].lines,xSubdivisions:t[3].subdivisions,ySubdivisions:t[2].subdivisions}});let M=t[0].labels&&vt(t),O=t[1].labels&&wt(t),S=t[3].axis&&bt(),A=t[2].axis&&kt();return{c(){e=o("defs"),m(n.$$.fragment),i=w(),r=o("rect"),s=w(),M&&M.c(),c=w(),O&&O.c(),$=w(),S&&S.c(),u=w(),A&&A.c(),p=f(),a(r,"fill",`url(#${t[4]})`),a(r,"x",-1e7),a(r,"y",-1e7),a(r,"width",2e7),a(r,"height",2e7)},m(t,o){l(t,e,o),h(n,e,null),l(t,i,o),l(t,r,o),l(t,s,o),M&&M.m(t,o),l(t,c,o),O&&O.m(t,o),l(t,$,o),S&&S.m(t,o),l(t,u,o),A&&A.m(t,o),l(t,p,o),y=!0},p(t,[e]){const i={};8&e&&(i.xLines=t[3].lines),4&e&&(i.yLines=t[2].lines),8&e&&(i.xSubdivisions=t[3].subdivisions),4&e&&(i.ySubdivisions=t[2].subdivisions),n.$set(i),t[0].labels?M?(M.p(t,e),1&e&&g(M,1)):(M=vt(t),M.c(),g(M,1),M.m(c.parentNode,c)):M&&(b(),x(M,1,1,(()=>{M=null})),k()),t[1].labels?O?(O.p(t,e),2&e&&g(O,1)):(O=wt(t),O.c(),g(O,1),O.m($.parentNode,$)):O&&(b(),x(O,1,1,(()=>{O=null})),k()),t[3].axis?S||(S=bt(),S.c(),S.m(u.parentNode,u)):S&&(S.d(1),S=null),t[2].axis?A||(A=kt(),A.c(),A.m(p.parentNode,p)):A&&(A.d(1),A=null)},i(t){y||(g(n.$$.fragment,t),g(M),g(O),y=!0)},o(t){x(n.$$.fragment,t),x(M),x(O),y=!1},d(t){t&&d(e),v(n),t&&d(i),t&&d(r),t&&d(s),M&&M.d(t),t&&d(c),O&&O.d(t),t&&d($),S&&S.d(t),t&&d(u),A&&A.d(t),t&&d(p)}}}let Ot=0;const St={axis:!0,lines:1,labels:t=>t};function At(t,e,n){let i,r,{subdivisions:o=!1}=e,{xAxis:s=Object.assign({subdivisions:o},St)}=e,{yAxis:a=Object.assign({subdivisions:o},St)}=e;const l="visual-math-grid-"+Ot++;return t.$$set=t=>{"subdivisions"in t&&n(5,o=t.subdivisions),"xAxis"in t&&n(0,s=t.xAxis),"yAxis"in t&&n(1,a=t.yAxis)},t.$$.update=()=>{33&t.$$.dirty&&n(3,i=Object.assign(Object.assign({subdivisions:o},St),s)),34&t.$$.dirty&&n(2,r=Object.assign(Object.assign({subdivisions:o},St),a))},[s,a,r,i,l,o]}class Pt extends n{constructor(t){super(),i(this,t,At,Mt,r,{subdivisions:5,xAxis:0,yAxis:1})}}function Lt(t){let e,n,i,r,s,a,c,$,p=[{cx:n=t[0][0]},{cy:i=t[0][1]},{rx:r=Math.abs(t[1][0])},{ry:s=Math.abs(t[1][1])},{"stroke-width":t[4]},{"stroke-dasharray":a="dashed"===t[2]?"4,3":void 0},{transform:c=`${t[8]} ${t[7]}`},t[10],{style:$=`\n    stroke: ${t[5]};\n    fill: ${t[5]};\n    fill-opacity: ${t[6]};\n    stroke-opacity: ${t[3]};\n    ${t[10].style||""}\n  `}],y={};for(let o=0;o<p.length;o+=1)y=M(y,p[o]);return{c(){e=o("ellipse"),O(e,y),S(e,"svelte-cc8k9r",!0)},m(t,n){l(t,e,n)},p(t,[o]){O(e,y=A(p,[1&o&&n!==(n=t[0][0])&&{cx:n},1&o&&i!==(i=t[0][1])&&{cy:i},2&o&&r!==(r=Math.abs(t[1][0]))&&{rx:r},2&o&&s!==(s=Math.abs(t[1][1]))&&{ry:s},16&o&&{"stroke-width":t[4]},4&o&&a!==(a="dashed"===t[2]?"4,3":void 0)&&{"stroke-dasharray":a},384&o&&c!==(c=`${t[8]} ${t[7]}`)&&{transform:c},1024&o&&t[10],1128&o&&$!==($=`\n    stroke: ${t[5]};\n    fill: ${t[5]};\n    fill-opacity: ${t[6]};\n    stroke-opacity: ${t[3]};\n    ${t[10].style||""}\n  `)&&{style:$}])),S(e,"svelte-cc8k9r",!0)},i:u,o:u,d(t){t&&d(e)}}}function Vt(t,e,n){let i,r;const o=["center","radius","angle","strokeStyle","strokeOpacity","weight","color","fillOpacity"];let s,a=P(e,o),{center:l=B.fromValues(0,0)}=e,{radius:c=B.fromValues(1,1)}=e,{angle:$=0}=e,{strokeStyle:d="solid"}=e,{strokeOpacity:u=1}=e,{weight:p=2}=e,{color:f="var(--visual-math-fg)"}=e,{fillOpacity:m=.15}=e,h=G();return y(t,h,(t=>n(12,s=t))),t.$$set=t=>{e=M(M({},e),L(t)),n(10,a=P(e,o)),"center"in t&&n(0,l=t.center),"radius"in t&&n(1,c=t.radius),"angle"in t&&n(11,$=t.angle),"strokeStyle"in t&&n(2,d=t.strokeStyle),"strokeOpacity"in t&&n(3,u=t.strokeOpacity),"weight"in t&&n(4,p=t.weight),"color"in t&&n(5,f=t.color),"fillOpacity"in t&&n(6,m=t.fillOpacity)},t.$$.update=()=>{4096&t.$$.dirty&&n(8,i=s.cssScale),2049&t.$$.dirty&&n(7,r=`rotate(${180*$/Math.PI} ${l[0]} ${l[1]})`)},[l,c,d,u,p,f,m,r,i,h,a,$,s]}class Et extends n{constructor(t){super(),i(this,t,Vt,Lt,r,{center:0,radius:1,angle:11,strokeStyle:2,strokeOpacity:3,weight:4,color:5,fillOpacity:6})}}function jt(t){let e,n;const i=[{center:t[0]},{radius:t[7]},{angle:t[1]},{strokeStyle:t[2]},{strokeOpacity:t[3]},{weight:t[4]},{color:t[5]},{fillOpacity:t[6]},t[8]];let r={};for(let o=0;o<i.length;o+=1)r=M(r,i[o]);return e=new Et({props:r}),{c(){m(e.$$.fragment)},m(t,i){h(e,t,i),n=!0},p(t,[n]){const r=511&n?A(i,[1&n&&{center:t[0]},128&n&&{radius:t[7]},2&n&&{angle:t[1]},4&n&&{strokeStyle:t[2]},8&n&&{strokeOpacity:t[3]},16&n&&{weight:t[4]},32&n&&{color:t[5]},64&n&&{fillOpacity:t[6]},256&n&&V(t[8])]):{};e.$set(r)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){x(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function zt(t,e,n){const i=["center","radius","angle","strokeStyle","strokeOpacity","weight","color","fillOpacity"];let r=P(e,i),{center:o=B.fromValues(0,0)}=e,{radius:s=1}=e,{angle:a=0}=e,{strokeStyle:l="solid"}=e,{strokeOpacity:c=1}=e,{weight:$=2}=e,{color:d="var(--visual-math-fg)"}=e,{fillOpacity:u=.15}=e,p=B.fromValues(s,s);return t.$$set=t=>{e=M(M({},e),L(t)),n(8,r=P(e,i)),"center"in t&&n(0,o=t.center),"radius"in t&&n(9,s=t.radius),"angle"in t&&n(1,a=t.angle),"strokeStyle"in t&&n(2,l=t.strokeStyle),"strokeOpacity"in t&&n(3,c=t.strokeOpacity),"weight"in t&&n(4,$=t.weight),"color"in t&&n(5,d=t.color),"fillOpacity"in t&&n(6,u=t.fillOpacity)},t.$$.update=()=>{640&t.$$.dirty&&n(7,p=B.set(p,s,s))},[o,a,l,c,$,d,u,p,r,s]}class Rt extends n{constructor(t){super(),i(this,t,zt,jt,r,{center:0,radius:9,angle:1,strokeStyle:2,strokeOpacity:3,weight:4,color:5,fillOpacity:6})}}function Yt(t){let e,n,i,r,s,$,p;return{c(){e=o("g"),n=o("circle"),s=o("circle"),a(n,"cx",i=t[5](t[1][0])),a(n,"cy",r=t[4](t[1][1])),a(n,"r",30),a(n,"fill","transparent"),a(s,"cx",$=t[5](t[1][0])),a(s,"cy",p=t[4](t[1][1])),a(s,"r",6),a(s,"fill",t[0]),a(s,"stroke",t[0]),a(s,"stroke-opacity",.25),a(s,"tabindex",0),S(s,"draggable",t[3])},m(i,r){l(i,e,r),c(e,n),c(e,s),t[15](e)},p(t,[e]){34&e&&i!==(i=t[5](t[1][0]))&&a(n,"cx",i),18&e&&r!==(r=t[4](t[1][1]))&&a(n,"cy",r),34&e&&$!==($=t[5](t[1][0]))&&a(s,"cx",$),18&e&&p!==(p=t[4](t[1][1]))&&a(s,"cy",p),1&e&&a(s,"fill",t[0]),1&e&&a(s,"stroke",t[0]),8&e&&S(s,"draggable",t[3])},i:u,o:u,d(n){n&&d(e),t[15](null)}}}const Nt=B.create();function Xt(t,e,n){let i,r,o,s,a,{point:l=B.create()}=e,{color:c="var(--visual-math-blue)"}=e,{transform:$=U.create()}=e,{constrain:d}=e,u=B.fromValues(l[0],l[1]),p=t=>t;l=p(l);let f=G();y(t,f,(t=>n(14,a=t)));let m,h=B.create(),g=U.create(),x=B.create(),v=!1;return E((()=>{const t=new K(m,s);return()=>{t.destroy()}})),t.$$set=t=>{"point"in t&&n(7,l=t.point),"color"in t&&n(0,c=t.color),"transform"in t&&n(8,$=t.transform),"constrain"in t&&n(9,d=t.constrain)},t.$$.update=()=>{512&t.$$.dirty&&("horizontal"===d?n(10,p=([t,e])=>[t,u[1]]):"vertical"===d?n(10,p=([t,e])=>[u[0],e]):"function"==typeof d&&n(10,p=d)),16384&t.$$.dirty&&n(5,i=a.scaleX),16384&t.$$.dirty&&n(4,r=a.scaleY),16384&t.$$.dirty&&n(13,o=a.inversePixelMatrix),2304&t.$$.dirty&&n(11,g=U.invert(g,$)),15744&t.$$.dirty&&(s=t=>{var e;null===(e=t.event)||void 0===e||e.stopPropagation(),n(3,v=t.down);const i=B.transformMat2d(Nt,t.movement,o);t.first&&n(12,x=B.transformMat2d(x,l,$)),B.add(l,x,i),B.transformMat2d(l,l,g),n(7,l=p(l))}),386&t.$$.dirty&&n(1,h=B.transformMat2d(h,l,$))},[c,h,m,v,r,i,f,l,$,d,p,g,x,o,a,function(t){j[t?"unshift":"push"]((()=>{m=t,n(2,m)}))}]}class qt extends n{constructor(t){super(),i(this,t,Xt,Yt,r,{point:7,color:0,transform:8,constrain:9})}}function Ht(t){let e,n,i,r,s,c,$;return{c(){e=o("line"),a(e,"x1",n=t[4][0]),a(e,"y1",i=t[4][1]),a(e,"x2",r=t[5][0]),a(e,"y2",s=t[5][1]),a(e,"style",c=`stroke: ${t[0]}`),a(e,"stroke-width",t[2]),a(e,"opacity",t[3]),a(e,"stroke-dasharray",$="dashed"===t[1]?"4,3":void 0)},m(t,n){l(t,e,n)},p(t,[o]){16&o&&n!==(n=t[4][0])&&a(e,"x1",n),16&o&&i!==(i=t[4][1])&&a(e,"y1",i),32&o&&r!==(r=t[5][0])&&a(e,"x2",r),32&o&&s!==(s=t[5][1])&&a(e,"y2",s),1&o&&c!==(c=`stroke: ${t[0]}`)&&a(e,"style",c),4&o&&a(e,"stroke-width",t[2]),8&o&&a(e,"opacity",t[3]),2&o&&$!==($="dashed"===t[1]?"4,3":void 0)&&a(e,"stroke-dasharray",$)},i:u,o:u,d(t){t&&d(e)}}}const It=B.create();function Dt(t,e,n){let i,r,{point1:o=B.create()}=e,{point2:s=B.create()}=e,{color:a="var(--visual-math-fg)"}=e,{style:l="solid"}=e,{weight:c=2}=e,{opacity:$=1}=e;const d=G();y(t,d,(t=>n(11,r=t)));let u=B.create(),p=B.create(),f=B.create();return t.$$set=t=>{"point1"in t&&n(7,o=t.point1),"point2"in t&&n(8,s=t.point2),"color"in t&&n(0,a=t.color),"style"in t&&n(1,l=t.style),"weight"in t&&n(2,c=t.weight),"opacity"in t&&n(3,$=t.opacity)},t.$$.update=()=>{2048&t.$$.dirty&&n(10,i=r.pixelMatrix),896&t.$$.dirty&&n(9,u=B.scale(u,B.normalize(u,B.sub(It,s,o)),1e5)),1680&t.$$.dirty&&n(4,p=B.transformMat2d(p,B.sub(It,o,u),i)),1824&t.$$.dirty&&n(5,f=B.transformMat2d(f,B.add(It,s,u),i))},[a,l,c,$,p,f,d,o,s,u,i,r]}class Bt extends n{constructor(t){super(),i(this,t,Dt,Ht,r,{point1:7,point2:8,color:0,style:1,weight:2,opacity:3})}}function Ut(t){let e,n;return e=new Bt({props:{point1:t[0],point2:t[5],color:t[1],opacity:t[4],style:t[2],weight:t[3]}}),{c(){m(e.$$.fragment)},m(t,i){h(e,t,i),n=!0},p(t,[n]){const i={};1&n&&(i.point1=t[0]),32&n&&(i.point2=t[5]),2&n&&(i.color=t[1]),16&n&&(i.opacity=t[4]),4&n&&(i.style=t[2]),8&n&&(i.weight=t[3]),e.$set(i)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){x(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}const Wt=B.create(),Kt=B.create(),Tt=B.fromValues(1,0);function Ct(t,e,n){let{point:i=B.create()}=e,{angle:r=0}=e,{color:o="var(--visual-math-fg)"}=e,{style:s="solid"}=e,{weight:a=2}=e,{opacity:l=1}=e,c=B.create();return t.$$set=t=>{"point"in t&&n(0,i=t.point),"angle"in t&&n(6,r=t.angle),"color"in t&&n(1,o=t.color),"style"in t&&n(2,s=t.style),"weight"in t&&n(3,a=t.weight),"opacity"in t&&n(4,l=t.opacity)},t.$$.update=()=>{97&t.$$.dirty&&n(5,c=B.add(c,i,B.rotate(Wt,Tt,Kt,r)))},[i,o,s,a,l,c,r]}class Ft extends n{constructor(t){super(),i(this,t,Ct,Ut,r,{point:0,angle:6,color:1,style:2,weight:3,opacity:4})}}function Gt(t){let e,n;return e=new Ft({props:{point:t[0],angle:t[5],color:t[1],opacity:t[4],style:t[2],weight:t[3]}}),{c(){m(e.$$.fragment)},m(t,i){h(e,t,i),n=!0},p(t,[n]){const i={};1&n&&(i.point=t[0]),32&n&&(i.angle=t[5]),2&n&&(i.color=t[1]),16&n&&(i.opacity=t[4]),4&n&&(i.style=t[2]),8&n&&(i.weight=t[3]),e.$set(i)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){x(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Jt(t,e,n){let{point:i=B.create()}=e,{slope:r=0}=e,{color:o="var(--visual-math-fg)"}=e,{style:s="solid"}=e,{weight:a=2}=e,{opacity:l=1}=e,c=Math.atan(r);return t.$$set=t=>{"point"in t&&n(0,i=t.point),"slope"in t&&n(6,r=t.slope),"color"in t&&n(1,o=t.color),"style"in t&&n(2,s=t.style),"weight"in t&&n(3,a=t.weight),"opacity"in t&&n(4,l=t.opacity)},t.$$.update=()=>{64&t.$$.dirty&&n(5,c=Math.atan(r))},[i,o,s,a,l,c,r]}class Qt extends n{constructor(t){super(),i(this,t,Jt,Gt,r,{point:0,slope:6,color:1,style:2,weight:3,opacity:4})}}function Zt(t){let e,n,i,r,s,$,u;const p=t[38].default,y=z(p,t,t[37],null);return{c(){e=R("div"),n=o("svg"),y&&y.c(),a(n,"width",t[2]),a(n,"height",t[3]),a(n,"viewBox",i=`${-t[5](0)} ${-t[4](0)} ${t[2]} ${t[3]}`),a(n,"preserveAspectRatio","xMidYMin"),a(n,"style",r=`width: ${t[0]}; touch-action: ${t[1]?"none":"auto"};`),a(e,"class","visual-math svelte-5trppw"),a(e,"style",s=`width: ${t[8]}; height: ${t[7]}`),Y((()=>t[40].call(e)))},m(i,r){l(i,e,r),c(e,n),y&&y.m(n,null),t[39](e),$=N(e,t[40].bind(e)),u=!0},p(t,o){y&&y.p&&(!u||64&o[1])&&X(y,p,t,t[37],u?H(p,t[37],o,null):q(t[37]),null),(!u||4&o[0])&&a(n,"width",t[2]),(!u||8&o[0])&&a(n,"height",t[3]),(!u||60&o[0]&&i!==(i=`${-t[5](0)} ${-t[4](0)} ${t[2]} ${t[3]}`))&&a(n,"viewBox",i),(!u||3&o[0]&&r!==(r=`width: ${t[0]}; touch-action: ${t[1]?"none":"auto"};`))&&a(n,"style",r),(!u||384&o[0]&&s!==(s=`width: ${t[8]}; height: ${t[7]}`))&&a(e,"style",s)},i(t){u||(g(y,t),u=!0)},o(t){x(y,t),u=!1},d(n){n&&d(e),y&&y.d(n),t[39](null),$()}}}const _t=B.create();function te(e,n,i){let r,o,s,a,l,c,$,d,u,p,y,f,m,h,g,x,v,w,b,{$$slots:k={},$$scope:M}=n,{width:O=500}=n,{height:S=500}=n,{pan:A=!0}=n,{zoom:P=!0}=n,{xAxisExtent:L=B.fromValues(-5.5,5.5)}=n,{yAxisExtent:V=B.fromValues(-5.5,5.5)}=n,z="number"==typeof O?O:500,R="number"==typeof S?S:500,Y=Math.min(L[1]-L[0],V[1]-V[0]),N=B.fromValues(0,0),X=B.fromValues(L[0],V[0]),q=B.fromValues(L[1],V[1]),H=B.create(),I=U.create(),D=U.create(),G=[],_=[],tt=B.create(),et=B.create(),nt=C({xPanes:G,yPanes:_,xPaneRange:tt,yPaneRange:et});t(Z,nt);let it=C({min:X,max:q,width:z,height:R});!function(e){t(J,e)}(it);let rt=C({zoomAmount:Y,scaleX:l,scaleY:c,span:H,pixelMatrix:I,inversePixelMatrix:D,cssScale:u});!function(e){t(F,e)}(rt);let ot,st=C({mapX:s,mapY:a});return function(e){t(Q,e)}(st),E((()=>{const t=new K(ot,w),e=new T(ot,b);return()=>{t.destroy(),e.destroy()}})),e.$$set=t=>{"width"in t&&i(0,O=t.width),"height"in t&&i(11,S=t.height),"pan"in t&&i(1,A=t.pan),"zoom"in t&&i(12,P=t.zoom),"xAxisExtent"in t&&i(9,L=t.xAxisExtent),"yAxisExtent"in t&&i(10,V=t.yAxisExtent),"$$scope"in t&&i(37,M=t.$$scope)},e.$$.update=()=>{if(1&e.$$.dirty[0]&&i(8,r="auto"===O?"100%":`${O}px`),2048&e.$$.dirty[0]&&i(7,o="auto"===S?"100%":`${S}px`),13824&e.$$.dirty[0]&&(b=t=>{if(!P||t.last)return;const e=function(t){if("number"==typeof t.detail&&0!==t.detail){if(t.detail>0)return-1;if(t.detail<0)return 1}else if("number"==typeof t.wheelDelta){if(t.wheelDelta<0)return-1;if(t.wheelDelta>0)return 1}}(t.event);e&&(Y>3||e<0)&&(i(9,L=B.set(L,L[0]+e,L[1]-e)),i(10,V=B.set(V,V[0]+e,V[1]-e)),i(13,Y=Math.min(L[1]-L[0],V[1]-V[0])))}),8204&e.$$.dirty[0]){const t=.5*Y,e=.5*(Y*(z/R));i(9,L[0]=-e,L),i(9,L[1]=e,L),i(10,V[0]=-t,V),i(10,V[1]=t,V)}1550&e.$$.dirty[0]&&(w=t=>{A&&(i(14,N[0]=-t.offset[0]/z*(L[1]-L[0]),N),i(14,N[1]=-t.offset[1]/R*(V[1]-V[0]),N))}),50688&e.$$.dirty[0]&&i(15,X=B.add(X,N,B.set(_t,L[0],V[0]))),83456&e.$$.dirty[0]&&i(16,q=B.add(q,N,B.set(_t,L[1],V[1]))),98308&e.$$.dirty[0]&&i(5,s=t=>(t-X[0])/(q[0]-X[0])*z),98312&e.$$.dirty[0]&&i(4,a=t=>(t-X[1])/(q[1]-X[1])*R),229376&e.$$.dirty[0]&&i(17,H=B.sub(H,q,X)),131076&e.$$.dirty[0]&&i(26,l=t=>t/H[0]*z),131080&e.$$.dirty[0]&&i(25,c=t=>-t/H[1]*R),98304&e.$$.dirty[0]&&i(34,p=q[0]-X[0]),4&e.$$.dirty[0]|8&e.$$.dirty[1]&&i(36,$=t=>t/z*p),98304&e.$$.dirty[0]&&i(30,h=q[1]-X[1]),1073741832&e.$$.dirty[0]&&i(35,d=t=>-t/R*h),100925440&e.$$.dirty[0]&&i(18,I=U.fromScaling(I,B.set(_t,l(1),c(1)))),524288&e.$$.dirty[0]|48&e.$$.dirty[1]&&i(19,D=U.fromScaling(D,B.set(_t,$(1),d(1)))),100663296&e.$$.dirty[0]&&i(24,u=`scale(${l(1)} ${c(1)})`),8&e.$$.dirty[1]&&i(33,y=Math.pow(2,Math.round(Math.log10(p)/Math.log10(2)))),32768&e.$$.dirty[0]|4&e.$$.dirty[1]&&i(32,f=Math.floor(X[0]/y)*y),65536&e.$$.dirty[0]|4&e.$$.dirty[1]&&i(31,m=Math.ceil(q[0]/y)*y),7&e.$$.dirty[1]&&i(20,G=W(f,m,y).iter().map((t=>B.fromValues(t,t+y))).toArray()),4194304&e.$$.dirty[0]|3&e.$$.dirty[1]&&i(22,tt=B.set(tt,f,m)),1073741824&e.$$.dirty[0]&&i(29,g=Math.pow(2,Math.round(Math.log10(h)/Math.log10(2)))),536903680&e.$$.dirty[0]&&i(28,x=Math.floor(X[0]/g)*g),536936448&e.$$.dirty[0]&&i(27,v=Math.ceil(q[0]/g)*g),939524096&e.$$.dirty[0]&&i(21,_=W(x,v,g).iter().map((t=>B.fromValues(t,t+g))).toArray()),411041792&e.$$.dirty[0]&&i(23,et=B.set(et,x,v)),15728640&e.$$.dirty[0]&&nt.set({xPanes:G,yPanes:_,xPaneRange:tt,yPaneRange:et}),98316&e.$$.dirty[0]&&it.set({min:X,max:q,width:z,height:R}),118366208&e.$$.dirty[0]&&rt.set({zoomAmount:Y,scaleX:l,scaleY:c,span:H,pixelMatrix:I,inversePixelMatrix:D,cssScale:u}),48&e.$$.dirty[0]&&st.set({mapX:s,mapY:a})},[O,A,z,R,a,s,ot,o,r,L,V,S,P,Y,N,X,q,H,I,D,G,_,tt,et,u,c,l,v,x,g,h,m,f,y,p,d,$,M,k,function(t){j[t?"unshift":"push"]((()=>{ot=t,i(6,ot)}))},function(){z=this.offsetWidth,R=this.offsetHeight,i(2,z),i(3,R)}]}class ee extends n{constructor(t){super(),i(this,t,te,Zt,r,{width:0,height:11,pan:1,zoom:12,xAxisExtent:9,yAxisExtent:10},null,[-1,-1])}}function ne(t){let e,n,i,r,o,s,a,c,$,u,p,y,f,b,k,M,O,S,A,P,L,V,E,z;function R(e){t[12](e)}e=new Pt({}),i=new Rt({props:{center:t[1],radius:t[0],strokeStyle:"dashed",strokeOpacity:.3,fillOpacity:0}}),o=new Et({props:{center:t[1],radius:t[6],angle:t[9]}}),a=new Bt({props:{point1:t[1],point2:t[8]}}),$=new Ft({props:{point:t[1],angle:t[9]}}),p=new Qt({props:{point:t[1],slope:Math.PI/4}});let Y={color:"var(--visual-math-violet)"};function N(e){t[13](e)}void 0!==t[1]&&(Y.point=t[1]),f=new qt({props:Y}),j.push((()=>I(f,"point",R)));let X={transform:t[7],constrain:"horizontal",color:"var(--visual-math-indigo)"};function q(e){t[14](e)}void 0!==t[4]&&(X.point=t[4]),M=new qt({props:X}),j.push((()=>I(M,"point",N)));let H={transform:t[7],constrain:"vertical",color:"var(--visual-math-blue)"};function B(e){t[15](e)}void 0!==t[5]&&(H.point=t[5]),A=new qt({props:H}),j.push((()=>I(A,"point",q)));let U={transform:t[2],constrain:t[10],color:"var(--visual-math-pink)"};return void 0!==t[3]&&(U.point=t[3]),V=new qt({props:U}),j.push((()=>I(V,"point",B))),{c(){m(e.$$.fragment),n=w(),m(i.$$.fragment),r=w(),m(o.$$.fragment),s=w(),m(a.$$.fragment),c=w(),m($.$$.fragment),u=w(),m(p.$$.fragment),y=w(),m(f.$$.fragment),k=w(),m(M.$$.fragment),S=w(),m(A.$$.fragment),L=w(),m(V.$$.fragment)},m(t,d){h(e,t,d),l(t,n,d),h(i,t,d),l(t,r,d),h(o,t,d),l(t,s,d),h(a,t,d),l(t,c,d),h($,t,d),l(t,u,d),h(p,t,d),l(t,y,d),h(f,t,d),l(t,k,d),h(M,t,d),l(t,S,d),h(A,t,d),l(t,L,d),h(V,t,d),z=!0},p(t,e){const n={};2&e&&(n.center=t[1]),1&e&&(n.radius=t[0]),i.$set(n);const r={};2&e&&(r.center=t[1]),64&e&&(r.radius=t[6]),512&e&&(r.angle=t[9]),o.$set(r);const s={};2&e&&(s.point1=t[1]),256&e&&(s.point2=t[8]),a.$set(s);const l={};2&e&&(l.point=t[1]),512&e&&(l.angle=t[9]),$.$set(l);const c={};2&e&&(c.point=t[1]),p.$set(c);const d={};!b&&2&e&&(b=!0,d.point=t[1],D((()=>b=!1))),f.$set(d);const u={};128&e&&(u.transform=t[7]),!O&&16&e&&(O=!0,u.point=t[4],D((()=>O=!1))),M.$set(u);const y={};128&e&&(y.transform=t[7]),!P&&32&e&&(P=!0,y.point=t[5],D((()=>P=!1))),A.$set(y);const m={};4&e&&(m.transform=t[2]),1024&e&&(m.constrain=t[10]),!E&&8&e&&(E=!0,m.point=t[3],D((()=>E=!1))),V.$set(m)},i(t){z||(g(e.$$.fragment,t),g(i.$$.fragment,t),g(o.$$.fragment,t),g(a.$$.fragment,t),g($.$$.fragment,t),g(p.$$.fragment,t),g(f.$$.fragment,t),g(M.$$.fragment,t),g(A.$$.fragment,t),g(V.$$.fragment,t),z=!0)},o(t){x(e.$$.fragment,t),x(i.$$.fragment,t),x(o.$$.fragment,t),x(a.$$.fragment,t),x($.$$.fragment,t),x(p.$$.fragment,t),x(f.$$.fragment,t),x(M.$$.fragment,t),x(A.$$.fragment,t),x(V.$$.fragment,t),z=!1},d(t){v(e,t),t&&d(n),v(i,t),t&&d(r),v(o,t),t&&d(s),v(a,t),t&&d(c),v($,t),t&&d(u),v(p,t),t&&d(y),v(f,t),t&&d(k),v(M,t),t&&d(S),v(A,t),t&&d(L),v(V,t)}}}function ie(t){let e,n;return e=new ee({props:{width:"auto",height:"auto",$$slots:{default:[ne]},$$scope:{ctx:t}}}),{c(){m(e.$$.fragment)},m(t,i){h(e,t,i),n=!0},p(t,[n]){const i={};67583&n&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){x(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function re(t,e,n){let i,r,{rotationHintRadius:o=4}=e,s=B.fromValues(0,0),a=U.create(),l=B.fromValues(o,0),c=U.create(),$=B.fromValues(o-1,0),d=B.fromValues(0,o-2),u=B.create(),p=U.create(),y=B.create();return t.$$set=t=>{"rotationHintRadius"in t&&n(0,o=t.rotationHintRadius)},t.$$.update=()=>{6&t.$$.dirty&&n(2,a=U.fromTranslation(a,s)),8&t.$$.dirty&&n(9,i=Math.PI/2-Math.atan2(l[0],l[1])),2560&t.$$.dirty&&n(11,c=U.fromRotation(c,i)),112&t.$$.dirty&&n(6,u=B.set(u,$[0],d[1])),2180&t.$$.dirty&&n(7,p=U.mul(p,a,c)),268&t.$$.dirty&&n(8,y=B.transformMat2d(y,l,a)),1&t.$$.dirty&&n(10,r=t=>B.scale(t,B.normalize(t,t),o))},[o,s,a,l,$,d,u,p,y,i,r,c,function(t){s=t,n(1,s)},function(t){$=t,n(4,$)},function(t){d=t,n(5,d)},function(t){l=t,n(3,l)}]}class oe extends n{constructor(t){super(),i(this,t,re,ie,r,{rotationHintRadius:0})}}window.addEventListener("load",(function(){new oe({target:document.getElementById("app")})}));
